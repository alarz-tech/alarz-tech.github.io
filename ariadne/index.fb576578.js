function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=e.parcelRequire7135;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){r[t]=e},e.parcelRequire7135=o),o.register("8IF5N",(function(t,e){!function(){function e(){function t(t,e){var n,r=[],o=!1,i=e.cd,a=e.callback;if(e.filterConf.args.length){var c=[];e.filterConf.args.forEach((function(t,e){var n=i.watch(t,(function(t){r[e+1]=t,s()}));n.$.isStatic||c.push(n)}));var u=!1,s=function(){u||(u=!0,i.watch("$onScanOnce",(function(){if(u=!1,o){var e=t.apply(null,r);j.isPromise(e)?e.then((function(t){a(t),i.scan()})):a(e)}})))};c.length&&(n=function(){c.forEach((function(t){return t.stop()}))})}else s=function(){var e=t(r[0]);j.isPromise(e)?e.then((function(t){a(t),i.scan()})):a(e)};var l={onChange:function(t){o=!0,r[0]=t,s()},onStop:n,watchMode:e.watchMode};return l}function e(t,e,n,r){r.setValue(r.attrArgument,e)}var n=function(t,e){return n.bootstrap(t,e)};n.version="0.14.1",n.filters={},n.text={},n.core={},n.utils={},n.option={globalController:!1,removeAttribute:!0,domOptimization:!0,domOptimizationRemoveEmpty:!0,fastBinding:!0},n.debug={scan:0,directive:!1,watch:!1,watchText:!1,parser:!1},n.ctrl=n.controllers={},n.d=n.directives={al:{},bo:{},$global:{}},n.hooks={directive:[],binding:[]},n.priority={al:{app:2e3,checked:20,class:30,css:30,focused:20,if:700,ifnot:700,model:25,radio:25,repeat:1e3,select:20,stop:-10,value:20,on:10},$component:5,$attribute:-5};var r,o,i,a,c,u,s,l,f,h,p,d,v,m,g,y,w,b,x,k,E,O,_,C,T,A,j=n.f$={},N=function(t,e){var n=t.indexOf(e);n>=0?t.splice(n,1):console.warn("trying to remove not exist item")};return j.before=function(t,e){t.parentNode.insertBefore(e,t)},j.after=function(t,e){var n=t.parentNode,r=t.nextSibling;r?n.insertBefore(e,r):n.appendChild(e)},j.remove=function(t){var e=t.parentNode;e&&e.removeChild(t)},j.on=function(t,e,n){t.addEventListener(e,n,!1)},j.off=function(t,e,n){t.removeEventListener(e,n,!1)},j.isFunction=function(t){return t&&"[object Function]"===Object.prototype.toString.call(t)},j.isObject=function(t){return t&&"[object Object]"===Object.prototype.toString.call(t)},j.isPromise=function(t){return t&&window.Promise&&t instanceof window.Promise},j.isElement=function(t){return t instanceof HTMLElement},j.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},j.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," ")},j.rawAjax=function(t){var e=new XMLHttpRequest;for(var n in e.open(t.type||"GET",t.url,!0,t.username,t.password),t.headers)e.setRequestHeader(n,t.headers[n]);t.success&&(e.onload=function(){e.status>=200&&e.status<400?t.success(e.responseText):t.error&&t.error()}),t.error&&(e.onerror=t.error),e.send(t.data||null)},j.ajaxCache={},j.ajax=function(t){if(t.username||t.password||t.headers||t.data||!t.cache)return j.rawAjax(t);var e=t.type||"GET",n=e+":"+t.url,r=j.ajaxCache[n];return r||(j.ajaxCache[n]=r={callback:[]}),r.result?void(t.success&&t.success(r.result)):(r.callback.push(t),void(r.loading||(r.loading=!0,j.rawAjax({type:e,url:t.url,success:function(t){r.loading=!1,r.result=t;for(var e=0;e<r.callback.length;e++)r.callback[e].success&&r.callback[e].success(t);r.callback.length=0},error:function(){r.loading=!1;for(var t=0;t<r.callback.length;t++)r.callback[t].error&&r.callback[t].error();r.callback.length=0}}))))},function(){var t='@charset "UTF-8";[al-cloak],[hidden],.al-hide{display:none !important;}',e=document.querySelectorAll("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n)}(),j.ready=function(){var t=[],e=!1;return j.on(document,"DOMContentLoaded",(function n(){e=!0,j.off(document,"DOMContentLoaded",n);for(var r=0;r<t.length;r++)t[r]();t.length=0})),function(n){e?n():t.push(n)}}(),window.jQuery&&(window.jQuery.fn.alight=function(t){var e=[];return this.each((function(t,n){return e.push(n)})),e.length?n(e,t):void 0}),n.core.getFilter=function(t,e){var r=e.locals[t];if(r&&(j.isFunction(r)||r.init||r.fn))return r;if(r=n.filters[t])return r;throw"Filter not found: "+t},n.core.buildFilterNode=function(e,n,r,o){if(j.isFunction(r))return t(r,{cd:e,filterConf:n,callback:o});if(r.init)return r.init.call(e,e.scope,n.raw,{setValue:o,conf:n,changeDetector:e});if(j.isFunction(r.fn))return t(r.fn,{cd:e,filterConf:n,callback:o,watchMode:r.watchMode});throw"Wrong filter: "+n.name},n.ChangeDetector=function(t){var e,n;return n=new i,e=new r(n,t||{}),n.topCD=e,e},(i=function(){return this.watchers={any:[],finishBinding:[],finishScan:[],finishScanOnce:[],onScanOnce:[]},this.status=null,this.extraLoop=!1,this.finishBinding_lock=!1,this.lateScan=!1,this.topCD=null,this}).prototype.destroy=function(){return this.watchers.any.length=0,this.watchers.finishBinding.length=0,this.watchers.finishScan.length=0,this.watchers.finishScanOnce.length=0,this.watchers.onScanOnce.length=0,this.topCD?this.topCD.destroy():void 0},r=function(t,e){this.scope=e,this.locals=e,this.root=t,this.watchList=[],this.destroy_callbacks=[],this.parent=null,this.children=[],this.rwatchers={any:[],finishScan:[],elEvents:[]}},r.prototype.new=function(t,e){var n,o,i;return e=e||{},i=this,null==t&&(t=i.scope),(o=new r(i.root,t)).parent=i,t===i.scope&&(e.locals?((n=i._ChildLocals)||(i._ChildLocals=n=function(){return this.$$root=t,this},n.prototype=i.locals),o.locals=new n):o.locals=i.locals),i.children.push(o),o},r.prototype.destroy=function(){var t,e,n,r,o,i,a,c,u,s,l,f,h,p,d,v,m,g,y,w,b,x,k;for(x=(t=this).root,t.scope=null,t.parent&&N(t.parent.children,t),r=0,a=(v=t.destroy_callbacks).length;a>r;r++)(0,v[r])();for(o=0,c=(m=t.children.slice()).length;c>o;o++)m[o].destroy();for(t.destroy_callbacks.length=0,i=0,u=(g=t.watchList).length;u>i;i++)(e=g[i]).onStop&&e.onStop();for(t.watchList.length=0,h=0,s=(y=t.rwatchers.any).length;s>h;h++)k=y[h],N(x.watchers.any,k);for(t.rwatchers.any.length=0,p=0,l=(w=t.rwatchers.finishScan).length;l>p;p++)k=w[p],N(x.watchers.finishScan,k);for(t.rwatchers.finishScan.length=0,d=0,f=(b=this.rwatchers.elEvents).length;f>d;d++)n=b[d],j.off(n[0],n[1],n[2]);this.rwatchers.elEvents.length=0,x.topCD===t&&(x.topCD=null,x.destroy())},a=function(t){return this.cb=t},p=function(t,e,n){var r,o;return r=t.root,o=new a(n),t.rwatchers[e].push(o),r.watchers[e].push(o),{stop:function(){return N(t.rwatchers[e],o),N(r.watchers[e],o)}}},r.prototype.on=function(t,e,n){return j.on(t,e,n),this.rwatchers.elEvents.push([t,e,n])},l={$any:function(t,e){return p(t,"any",e)},$finishScan:function(t,e){return p(t,"finishScan",e)},$finishScanOnce:function(t,e){t.root.watchers.finishScanOnce.push(e)},$onScanOnce:function(t,e){t.root.watchers.onScanOnce.push(e)},$destroy:function(t,e){t.destroy_callbacks.push(e)},$finishBinding:function(t,e){t.root.watchers.finishBinding.push(e)}},d=function(){},r.prototype.watch=function(t,e,r){var o,i,a,c,s,f,h,p,v,m;if(s=l[t])return s(this,e);if(!0===(r=r||{})&&(r={isArray:!0}),r.init&&console.warn("watch.init is depricated"),(o=this).root,m=o.scope,j.isFunction(t)?(c=t,p=n.utils.getId(),f=!0):(f=!1,c=null,"::"===(t=t.trim()).slice(0,2)&&(t=t.slice(2),r.oneTime=!0),p=t,p=r.deep?"d#"+p:r.isArray?"a#"+p:"v#"+p),n.debug.watch&&console.log("$watch",t),h=!1,!f)if(r.watchText)c=r.watchText.fn;else{if((i=n.utils.compile.expression(t)).filter)return function(t,e,r,o){var i=null,a=o.oneTime;if(o.isArray?i="array":o.deep&&(i="deep"),!r){var c={el:o.element,ea:o.elementAttr};r=function(e){u(t.scope,c,e)}}for(var s=n.utils.parsFilter(e.filter),l=[],f=s.result.length-1;f>=0;f--){var h=n.core.getFilter(s.result[f].name,t),p=n.core.buildFilterNode(t,s.result[f],h,r);p.watchMode&&(i=p.watchMode),p.onStop&&l.push(p.onStop),r=p.onChange}return o={oneTime:a},"array"===i?o.isArray=!0:"deep"===i&&(o.deep=!0),l.length&&(o.onStop=function(){l.forEach((function(t){return t()})),l.length=0}),t.watch(e.expression,r,o)}(o,i,e,r);h=i.isSimple&&0===i.simpleVariables.length,c=i.fn}return r.deep&&(r.isArray=!1),a={isStatic:h,isArray:Boolean(r.isArray),extraLoop:!r.readOnly,deep:!0===r.deep?10:r.deep,value:d,callback:e,exp:c,src:""+t,onStop:r.onStop||null,el:r.element||null,ea:r.elementAttr||null},h?o.watch("$onScanOnce",(function(){return u(m,a,a.exp(m))})):o.watchList.push(a),v={$:a,stop:function(){var e;if(r.onStop)try{r.onStop()}catch(r){e=r,n.exceptionHandler(e,"Error in onStop of watcher: "+t,t)}if(!a.isStatic)return N(o.watchList,a)},refresh:function(){var t;return t=a.exp(o.locals),a.value=t&&a.deep?n.utils.clone(t,a.deep):t&&a.isArray?t.slice():t}},r.oneTime&&(a.callback=function(t){return void 0!==t?(v.stop(),e(t)):void 0}),v},r.prototype.watchGroup=function(t,e){var n,r,o,i,a,c;if(n=this,!e&&j.isFunction(t)&&(e=t,t=null),c=!1,r=function(){return c?void 0:(c=!0,n.watch("$onScanOnce",(function(){return c=!1,e()})))},t)for(o=0,a=t.length;a>o;o++)i=t[o],n.watch(i,r);return r},s=window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()},f=function(t,e){var n,r,o,i;if(null===t||null===e)return!0;if((i=typeof t)!==typeof e)return!0;if("object"===i){if(t.length!==e.length)return!0;for(n=r=0,o=t.length;o>r;n=++r)if(t[n]!==e[n])return!0}return!1},u=function(t,e,n){e.el?e.ea?e.el.setAttribute(e.ea,n):e.el.nodeValue=n:e.callback.call(t,n)},c=function(t,e,r,o){var i,a;return i={src:r.src,scope:e.scope,locals:e.locals},r.el&&(i.element=r.el),a=1===o?"$scan, error in callback: ":"$scan, error in expression: ",n.exceptionHandler(t,a+r.src,i)},o=function(){},h=function(t,e){var r,i,a,u,s,l,h,p,v,m,g,y,w,b,x,k,E;if(t.root,l=!1,u=0,x=0,t){for(w=[],h=0,a=t;a;){for(g=a.locals,x+=a.watchList.length,p=0,m=(b=a.watchList.slice()).length;m>p;p++){v=(E=b[p]).value;try{k=E.exp(g)}catch(t){s=t,k=o}if(v!==k){if(y=!1,E.isArray?(r=Array.isArray(v))===(i=Array.isArray(k))?r?f(v,k)&&(y=!0,E.value=k.slice()):(y=!0,E.value=k):(y=!0,E.value=i?k.slice():k):E.deep?n.utils.equal(v,k,E.deep)||(y=!0,E.value=n.utils.clone(k,E.deep)):(y=!0,E.value=k),y)if(y=!1,k===o)c(s,a,E);else{u++;try{E.el?E.ea?null!=k?E.el.setAttribute(E.ea,k):E.el.removeAttribute(E.ea):E.el.nodeValue=k:(v===d&&(v=void 0),"$scanNoChanges"!==E.callback.call(a.scope,k,v)&&E.extraLoop&&(l=!0))}catch(t){c(s=t,a,E,1)}}n.debug.scan>1&&console.log("changed:",E.src)}}w.push.apply(w,a.children),a=w[h++]}e.total=x,e.changes=u,e.extraLoop=l}},r.prototype.digest=function(){var t,e,r,o,i,a,c,u,l;for(c=this.root,o=10,l=0,n.debug.scan&&(u=s()),a={total:0,changes:0,extraLoop:!1,src:"",scope:null,element:null};o;){if(o--,c.extraLoop=!1,c.watchers.onScanOnce.length)for(i=c.watchers.onScanOnce.slice(),c.watchers.onScanOnce.length=0,e=0,r=i.length;r>e;e++)i[e].call(c);if(h(this,a),l+=a.changes,!a.extraLoop&&!c.extraLoop&&!c.watchers.onScanOnce.length)break}return n.debug.scan&&(t=s()-u,console.log("$scan: loops: ("+(10-o)+"), last-loop changes: "+a.changes+", watches: "+a.total+" / "+t+"ms")),a.mainLoop=o,a.totalChanges=l,a},r.prototype.scan=function(t){var e,r,o,i,a,c,u,s,l,f,h;if(h=this.root,t=t||{},!n.option.zone||t.zone){if(j.isFunction(t)&&(t={callback:t}),t.callback&&h.watchers.finishScanOnce.push(t.callback),t.late){if(h.lateScan)return;return h.lateScan=!0,void n.nextTick((function(){return h.lateScan?h.topCD.scan():void 0}))}if("scaning"===h.status)return void(h.extraLoop=!0);if(h.lateScan=!1,h.status="scaning",(f=h.topCD?h.topCD.digest():{}).totalChanges)for(r=0,a=(s=h.watchers.any).length;a>r;r++)(0,s[r])();for(h.status=null,o=0,c=(l=h.watchers.finishScan).length;c>o;o++)(0,l[o])();for(e=h.watchers.finishScanOnce.slice(),h.watchers.finishScanOnce.length=0,i=0,u=e.length;u>i;i++)e[i].call(h);if(0===f.mainLoop)throw"Infinity loop detected";return f}},n.core.ChangeDetector=r,r.prototype.compile=function(t,e){return n.utils.compile.expression(t,e).fn},r.prototype.setValue=function(t,e){var r,o,i,a,c,u,s,l,f,h;i=(r=this).compile(t+" = $value",{input:["$value"],no_return:!0});try{return i(r.locals,e)}catch(p){if(o=p,l="can't set variable: "+t,n.debug.parser&&console.warn(l),(""+o).indexOf("TypeError")>=0&&((h=t.match(/^([\w\d\.]+)\.[\w\d]+$/))&&h[1])){for(s=r.locals,a=0,u=(f=h[1].split(".")).length;u>a;a++)void 0===s[c=f[a]]&&(s[c]={}),s=s[c];try{return void i(r.locals,e)}catch(t){}}return n.exceptionHandler(o,l,{name:t,value:e})}},r.prototype.eval=function(t){return this.compile(t)(this.locals)},r.prototype.getValue=function(t){return this.eval(t)},function(){var t;n.text.$base=function(t){var e,r,o,i,a;if(i=t.point,!(r=(a=(e=t.cd).scope).$ns&&a.$ns.text?a.$ns.text[t.name]:n.text[t.name]))throw"No directive alight.text."+t.name;return o={changeDetector:e,setter:function(e){return t.update?(i.value=null===e?"":""+e,t.update()):void 0},setterRaw:function(e){return t.updateRaw?(i.value=null===e?"":""+e,t.updateRaw()):void 0},finally:function(e){return t.finally?(i.value=null===e?"":""+e,i.type="text",t.finally(),t.update=null,t.finally=null):void 0}},r.call(e,o.setter,t.exp,a,o)},t=function(t,e,r){var o,i,a,c,s,l,f,h,p,d,v,m,g,y,w,b,x,k,E,O,_,C,T,A,j,N,L,D,$;if(r=r||{},i=this,n.debug.watchText&&console.log("$watchText",t),A=n.utils.compile.buildSimpleText(t,null))i.watch(t,e,{watchText:A,element:r.element,elementAttr:r.elementAttr});else{for(s=n.utils.parsText(t),D=0,o=!0,_=!1,f=h=l=function(){},g=0,b=s.length;b>g;g++)if("expression"===(c=s[g]).type)if(E=(p=c.list.join("|")).match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/))c.isDir=!0,"#"===(O=E[1])?0>(m=p.indexOf(" "))?(O=p.substring(1),p=""):(O=p.slice(1,m),p=p.slice(m)):p=p.substring(O.length),n.text.$base({name:O,exp:p,cd:i,point:c,update:function(){return f()},updateRaw:function(){return h()},finally:function(){return f(),l()}}),_=!0,"text"!==c.type&&(o=!1);else if((a=n.utils.compile.expression(p,{string:!0})).filter)D++,o=!1,c.watched=!0,function(t){i.watch(p,(function(e){return null==e&&(e=""),t.value=e,f()}))}(c);else{if(c.fn=a.fn,!a.rawExpression)throw"Error";a.isSimple&&0===a.simpleVariables.length?(c.type="text",c.value=c.fn()):(c.re=a.rawExpression,D++)}if(o){if(!D){for(N="",y=0,x=s.length;x>y;y++)c=s[y],N+=c.value;return void i.watch("$onScanOnce",(function(){return u(i.scope,{callback:e,el:r.element,ea:r.elementAttr},N)}))}return A=_?n.utils.compile.buildSimpleText(null,s):n.utils.compile.buildSimpleText(t,s),void i.watch(t,e,{watchText:{fn:A.fn},element:r.element,elementAttr:r.elementAttr})}if($={callback:e,el:r.element,ea:r.elementAttr},s.scope=i.scope,v=n.utils.compile.buildText(t,s),h=function(){return u(i.scope,$,v())},D){for(L=null,T="",f=function(){T=v()},l=function(){var t,e;for(m=!0,t=0,e=s.length;e>t;t++)if("expression"===(c=s[t]).type){m=!1;break}m&&(i.watch("$finishScanOnce",(function(){return L.stop()})),r.onStatic&&r.onStatic())},C=function(){return T},w=0,k=s.length;k>w;w++)if("expression"===(c=s[w]).type){if(c.isDir||c.watched)continue;c.watched=!0,function(t,e){i.watch(e,(function(e){return null==e&&(e=""),t.value=e,f()}))}(c,c.list.join(" | "))}f(),L=i.watch(C,e,{element:r.element,elementAttr:r.elementAttr})}else j=!1,d=function(){return j=!1,h()},(f=function(){return j?void 0:(j=!0,i.watch("$onScanOnce",d))})()}},r.prototype.watchText=t}(),v={TR:1,TD:1,LI:1},n.utils.optmizeElement=function(t,e){var r,o,i,a,c,u,s,l,f,h,p,d,m,g,y,w,b,x,k;if(1===t.nodeType){for(e=e||!n.option.domOptimizationRemoveEmpty,"PRE"===t.nodeName&&(e=!0),!(a=t.firstChild)||3!==a.nodeType||a.nodeValue.trim()||e||(j.remove(a),a=t.firstChild),y=!1;a;)m=a.nextSibling,!y||3!==a.nodeType||a.nodeValue.trim()||e?(y=1===a.nodeType&&v[a.nodeName],n.utils.optmizeElement(a,e)):j.remove(a),a=m;!(a=t.lastChild)||3!==a.nodeType||a.nodeValue.trim()||e||j.remove(a)}else if(3===t.nodeType){if(x=t.data,p=n.utils.pars_start_tag,0>(u=x.indexOf(p)))return;if(x.slice(u+p.length).indexOf(p)<0)return;for(g="t",b=[r={value:""}],s=0,f=(i=n.utils.parsText(x)).length;f>s;s++)"text"===(o=i[s]).type?r.value+=o.value:(c=o.list.join("|"),k=n.utils.pars_start_tag+c+n.utils.pars_finish_tag,c.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/)?("t"===g||"d"===g?r.value+=k:(r={value:k},b.push(r)),g="d"):1===o.list.length?("t"===g||"v"===g?r.value+=k:(r={value:k},b.push(r)),g="v"):"t"===g?r.value+=k:(r={value:k},b.push(r)));if(b.length<2)return;for((a=t).data=b[0].value,l=0,h=(w=b.slice(1)).length;h>l;l++)o=w[l],d=document.createTextNode(o.value),j.after(a,d),a=d}},function(){var t;n.hooks.attribute=t=[],t.push({code:"dataPrefix",fn:function(){"data-"===this.attrName.slice(0,5)&&(this.attrName=this.attrName.slice(5))}}),t.push({code:"colonNameSpace",fn:function(){var t,e;this.directive||this.name||((e=this.attrName.match(/^(\w+)[\-\:](.+)$/))?(this.ns=e[1],t=e[2]):(this.ns="$global",t=this.attrName),(e=t.match(/^([^\.]+)\.(.*)$/))&&(t=e[1],this.attrArgument=e[2]),this.name=t.replace(/(-\w)/g,(function(t){return t.substring(1).toUpperCase()})))}}),t.push({code:"getGlobalDirective",fn:function(){var t;if(!this.directive){if(!(t=n.d[this.ns]))return this.result="noNS",void(this.stop=!0);this.directive=t[this.name],this.directive||(this.result="$global"===this.ns?"noNS":"noDirective",this.stop=!0)}}}),t.push({code:"cloneDirective",fn:function(){var t,e,r,o,i,a;if(i=this.directive,o=this.ns,r=this.name,t={},j.isFunction(i))t.init=i;else{if(!j.isObject(i))throw"Wrong directive: "+o+"."+r;for(e in i)a=i[e],t[e]=a}if(t.priority=i.priority||n.priority[o]&&n.priority[o][r]||0,t.restrict=i.restrict||"A",t.restrict.indexOf(this.attrType)<0)throw"Directive has wrong binding (attribute/element): "+r;this.directive=t}}),t.push({code:"preprocessor",fn:function(){var t,e,r;r=this.ns,e=this.name,(t=this.directive).$init=function(o,i,a,c){var u,s;return u=function(){var t,e,n,r;for(t=e=0,r=(n=s.procLine).length;r>e;t=++e)if(n[t].fn.call(s),s.isDeferred){s.procLine=n.slice(t+1);break}return s.async=!0,null},s={element:i,value:a,cd:o,env:c,ns:r,name:e,doBinding:!1,directive:t,isDeferred:!1,procLine:n.hooks.directive,makeDeferred:function(){return s.isDeferred=!0,s.doBinding=!0,s.retStopBinding=!0,s.async=!1,function(){return s.isDeferred=!1,s.async?u():void 0}}},t.stopBinding&&(c.stopBinding=!0),u(),s.retStopBinding?"stopBinding":void 0}}})}(),function(){var t;(t=n.hooks.directive).push({code:"init",fn:function(){var t;this.directive.init&&(n.debug.directive&&this.directive.scope&&console.warn(this.ns+"-"+this.name+" uses scope and init together, probably you need use link instead of init"),this.env.changeDetector=this.cd,(t=this.directive.init.call(this.env,this.cd.scope,this.element,this.value,this.env))&&t.start&&t.start())}}),t.push({code:"templateUrl",fn:function(){var t,e;e=this,this.directive.templateUrl&&(t=this.makeDeferred(),j.ajax({cache:!0,url:this.directive.templateUrl,success:function(n){return e.directive.template=n,t()},error:t}))}}),t.push({code:"template",fn:function(){var t;this.directive.template&&(1===this.element.nodeType?this.element.innerHTML=this.directive.template:8===this.element.nodeType&&((t=document.createElement("p")).innerHTML=this.directive.template.trim(),t=t.firstChild,j.after(this.element,t),this.element=t,this.doBinding=!0))}}),t.push({code:"scope",fn:function(){var t,e;if(this.directive.scope){switch(e=this.cd,this.directive.scope){case!0:t=e.new({$parent:e.scope});break;case"root":t=n.ChangeDetector({$parent:e.scope}),e.watch("$destroy",(function(){return t.destroy()}));break;default:throw"Wrong scope value: "+this.directive.scope}this.env.parentChangeDetector=e,this.cd=t,this.doBinding=!0,this.retStopBinding=!0}}}),t.push({code:"link",fn:function(){var t;this.directive.link&&(this.env.changeDetector=this.cd,(t=this.directive.link.call(this.env,this.cd.scope,this.element,this.value,this.env))&&t.start&&t.start())}}),t.push({code:"scopeBinding",fn:function(){this.doBinding&&!this.env.stopBinding&&n.bind(this.cd,this.element,{skip_attr:this.env.skippedAttr()})}})}(),E=function(){var t;return t=function(t,e,r){var o;"A"===e.attr_type?((o=r||{}).priority=n.priority.$attribute,o.is_attr=!0,o.name=t,o.attrName=t,o.element=e.element,e.list.push(o)):"M"===e.attr_type&&e.list.push(r)},function(e,r){var o,i,a,c;if(r.skip_attr.indexOf(e)>=0)return t(e,r,{skip:!0});for(o={attrName:e,attrType:r.attr_type,element:r.element,cd:r.cd,result:null},i=0,a=(c=n.hooks.attribute).length;a>i&&(c[i].fn.call(o),!o.stop);i++);return"noNS"===o.result?void t(e,r):"noDirective"===o.result?"E"===r.attr_type?void r.list.push({name:e,priority:-10,attrName:e,noDirective:!0}):void t(e,r,{noDirective:!0}):void r.list.push({name:e,directive:o.directive,priority:o.directive.priority,attrName:e,attrArgument:o.attrArgument})}}(),k=function(t,e){return t.priority===e.priority?0:t.priority>e.priority?-1:1},g=function(t,e,r,o){var i;return(i=r).indexOf(n.utils.pars_start_tag)<0?void 0:(t.watchText(i,null,{element:e,elementAttr:o}),!0)},x=function(t,e){var r;return(r=e.data).indexOf(n.utils.pars_start_tag)<0?void 0:(t.watchText(r,null,{element:e}),r)},y=function(t,e){var r,o,i,a,c,u,s,l,f,h;if("directive:"===(f=e.nodeValue.trim()).slice(0,10)){if((s=(f=f.slice(10).trim()).indexOf(" "))>=0?(i=f.slice(0,+(s-1)+1||9e9),h=f.slice(s+1)):(i=f,h=""),r={list:l=[],element:e,attr_type:"M",cd:t,skip_attr:[]},E(i,r),(o=l[0]).noDirective)throw"Comment directive not found: "+i;a=o.directive,u=new m({element:e,attrName:o.attrName,attrArgument:o.attrArgument||null,attributes:l}),n.debug.directive&&console.log("bind",o.attrName,h,o);try{a.$init(t,e,h,u)}catch(r){c=r,n.exceptionHandler(c,"Error in directive: "+o.name,{value:h,env:u,cd:t,scope:t.scope,element:e})}return u.skipToElement?{directive:1,skipToElement:u.skipToElement}:{directive:1,skipToElement:null}}},m=function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this},m.prototype.takeAttr=function(t,e){var n,r,o,i;for(1===arguments.length&&(e=!0),r=0,o=(i=this.attributes).length;o>r;r++)if((n=i[r]).attrName===t)return e&&(n.skip=!0),this.element.getAttribute(t)||!0},m.prototype.skippedAttr=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=this.attributes).length;n>e;e++)(t=r[e]).skip&&o.push(t.attrName);return o},m.prototype.scan=function(t){return this.changeDetector.scan(t)},m.prototype.on=function(t,e,n){return this.changeDetector.on(t,e,n)},m.prototype.watch=function(t,e,n){return this.changeDetector.watch(t,e,n)},m.prototype.watchGroup=function(t,e){return this.changeDetector.watchGroup(t,e)},m.prototype.watchText=function(t,e,n){return this.changeDetector.watchText(t,e,n)},m.prototype.getValue=function(t){return this.changeDetector.getValue(t)},m.prototype.setValue=function(t,e){return this.changeDetector.setValue(t,e)},m.prototype.eval=function(t){return this.changeDetector.eval(t)},m.prototype.new=function(t,e){return!0===e?e={locals:!0}:!0===t&&null==e&&(t=null,e={locals:!0}),this.changeDetector.new(t,e)},m.prototype.bind=function(){var t,e,o,i,a,c,u;for(this.stopBinding=!0,o=0,a=0,c=arguments.length;c>a;a++)(t=arguments[a])instanceof r&&(e=t,o+=1),j.isElement(t)&&(i=t,o+=1);return(u=arguments[o])||(u={skip:this.skippedAttr()}),i||(i=this.element),e||(e=this.changeDetector),n.bind(e,i,u)},w=function(t,e,r){var o,i,a,c,u,s,l,f,h,p,d,v,y,w,x,O,_,C,T,A,N,L,D,$,S,B,I,V;if(c={directive:0,hook:0,skipToElement:null,fb:y={attr:[],dir:[],children:[]}},S=!1,I=(r=r||{}).skip_attr,!0===r.skip?r.skip_top=!0:I||(I=r.skip||[]),I instanceof Array||(I=[I]),!r.skip_top){for(o={list:T=[],element:e,skip_attr:I,attr_type:"E",cd:t},a=e.nodeName.toLowerCase(),E(a,o),("script"===a||"style"===a)&&(S=!0),o.attr_type="A",x=0,O=(D=e.attributes).length;O>x;x++)i=D[x],E(i.name,o);if(r.attachDirective)for(a in $=r.attachDirective)$[a],E(a,o);for(A=0,_=(T=T.sort(k)).length;_>A;A++)if(!(f=T[A]).skip){if(f.noDirective)throw"Directive not found: "+f.name;if(f.skip=!0,V=r.attachDirective&&r.attachDirective[f.attrName]?r.attachDirective[f.attrName]:e.getAttribute(f.attrName),f.is_attr)g(t,e,V,f.attrName)&&y.attr.push({attrName:f.attrName,value:V});else{h=f.directive,d=new m({element:e,attrName:f.attrName,attrArgument:f.attrArgument||null,attributes:T,stopBinding:!1,elementCanBeRemoved:r.elementCanBeRemoved,fbElement:r.fbElement}),n.debug.directive&&console.log("bind",f.attrName,V,f);try{"stopBinding"===h.$init(t,e,V,d)&&(S=!0)}catch(r){p=r,n.exceptionHandler(p,"Error in directive: "+f.attrName,{value:V,env:d,cd:t,scope:t.scope,element:e})}if(d.fastBinding?(v=j.isFunction(d.fastBinding)?d.fastBinding:h.init,y.dir.push({fb:v,attrName:f.attrName,value:V,attrArgument:d.attrArgument,fbData:d.fbData})):c.directive++,d.stopBinding){S=!0;break}d.skipToElement&&(c.skipToElement=d.skipToElement)}}}if(!S)for(B=null,s=function(){var t,n,r,o;for(o=[],n=0,t=(r=e.childNodes).length;t>n;n++)u=r[n],o.push(u);return o}(),w=N=0,C=s.length;C>N;w=++N)(u=s[w])&&(B?B===u&&(B=null):(r.fbElement&&(l={fbElement:r.fbElement.childNodes[w]}),L=b(t,u,l),c.directive+=L.directive,c.hook+=L.hook,B=L.skipToElement,L.fb&&(L.fb.text||L.fb.attr&&L.fb.attr.length||L.fb.dir&&L.fb.dir.length||L.fb.children&&L.fb.children.length)&&y.children.push({index:w,fb:L.fb})));return c},b=function(t,e,r){var o,i,a,c,u,s,l;if(s={directive:0,hook:0,skipToElement:null,fb:null},n.hooks.binding.length)for(i=0,a=(u=n.hooks.binding).length;a>i;i++)if(o=u[i],s.hook+=1,(c=o.fn(t,e,r))&&c.owner)return s;return 1===e.nodeType?(c=w(t,e,r),s.directive+=c.directive,s.hook+=c.hook,s.skipToElement=c.skipToElement,s.fb=c.fb):3===e.nodeType?(l=x(t,e))&&(s.fb={text:l}):8===e.nodeType&&((c=y(t,e))&&(s.directive+=c.directive,s.skipToElement=c.skipToElement)),s},n.nextTick=function(){var t,e,r;return r=null,e=[],t=function(){var t,o,i,a,c,u,s;for(r=null,o=e.slice(),e.length=0,c=0,u=o.length;u>c;c++){t=(a=o[c])[0],s=a[1];try{t.call(s)}catch(e){i=e,n.exceptionHandler(i,"$nextTick, error in function",{fn:t,self:s})}}return null},function(n){return e.push([n,this]),r?void 0:r=setTimeout(t,0)}}(),n.bind=function(t,e,r){var o,i,a,c,u,s;if(!t)throw"No changeDetector";if(!e)throw"No element";if(r=r||{},n.option.domOptimization&&!r.noDomOptimization&&n.utils.optmizeElement(e),(o=!(s=t.root).finishBinding_lock)&&(s.finishBinding_lock=!0,s.bindingResult={directive:0,hook:0}),u=b(t,e,r),s.bindingResult.directive+=u.directive,s.bindingResult.hook+=u.hook,t.digest(),o){for(s.finishBinding_lock=!1,c=s.watchers.finishBinding.slice(),s.watchers.finishBinding.length=0,i=0,a=c.length;a>i;i++)(0,c[i])();u.total=s.bindingResult}return u},function(){function t(t,e,n,r,o,i){r.callback.apply(null,i);var a=e._properties.root;a&&a.topCD&&a.topCD.scan({zone:!0})}var e=n.bind;n.bind=function(r,o,i){var a=r.root,c=n.option.zone;if(c){var u=!0===c?Zone:c,s=a.zone;if(s||(a.zone=s=u.current.fork({name:u.current.name+".x",properties:{root:a},onInvokeTask:t})),u.current!==s)return a.zone.run(e,null,[r,o,i])}return e(r,o,i)}}(),n.bootstrap=function(t,e){if(!t)return n.bootstrap("[al-app]"),n.bootstrap("[al\\:app]"),void n.bootstrap("[data-al-app]");var r;if(t instanceof n.core.ChangeDetector)r=t,t=e;else if(e instanceof n.core.ChangeDetector)r=e;else if(j.isFunction(e)){var o={};r=n.ChangeDetector(o),e.call(r,o)}else e&&(r=n.ChangeDetector(e));if(Array.isArray(t)){for(var i=void 0,a=0,c=t;a<c.length;a++){var u=c[a];i=n.bootstrap(u,r)}return i}if("string"==typeof t){i=void 0;for(var s=0,l=document.querySelectorAll(t);s<l.length;s++){var f=l[s];i=n.bootstrap(f,r)}return i}if(r||(r=n.ChangeDetector()),j.isElement(t)){for(var h,p,d=0,v=["al-app","al:app","data-al-app"];d<v.length&&(h=v[d],p=t.getAttribute(h),t.removeAttribute(h),!p);d++);var m;return p&&(m={skip_attr:[h],attachDirective:{}},n.d.al.ctrl?m.attachDirective["al-ctrl"]=p:m.attachDirective[p+"!"]=""),n.bind(r,t,m),r}n.exceptionHandler("Error in bootstrap","Error input arguments",{input:t})},n.utils.getId=function(){var t,e;return e=function(){var t,e,n,r,o;for(o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,r="";n>0;)e=n-62*(t=Math.floor(n/62)),n=t,r=o[e]+r;return r}(),t=1,function(){return e+"#"+t++}}(),n.utils.clone=O=function(t,e){var n,r,o,i;if(null==e&&(e=128),1>e)return null;if(!t)return t;if("object"==typeof t){if(t instanceof Array)return function(){var r,o,i;for(i=[],r=0,o=t.length;o>r;r++)n=t[r],i.push(O(n,e-1));return i}();if(t instanceof Date)return new Date(t.valueOf());if(t.nodeType&&"function"==typeof t.cloneNode)return t;for(r in o={},t)i=t[r],"$"!==r[0]&&(o[r]=O(i,e-1));return o}return t},n.utils.equal=_=function(t,e,n){var r,o,i,a,c,u,s;if(null==n&&(n=128),1>n)return!0;if(!t||!e)return t===e;if((u=typeof t)!==typeof e)return!1;if("object"===u){if(t instanceof Array){if(t.length!==e.length)return!1;for(r=o=0,a=t.length;a>o;r=++o)if(s=t[r],!_(s,e[r],n-1))return!1;return!0}if(t instanceof Date)return t.valueOf()===e.valueOf();if(t.nodeType&&"function"==typeof t.cloneNode)return t===e;for(i in c={},t)if(s=t[i],"$"!==i[0]&&(c[i]=!0,!_(s,e[i],n-1)))return!1;for(i in e)if(s=e[i],"$"!==i[0]&&!c[i]&&!_(s,t[i],n-1))return!1;return!0}return t===e},n.exceptionHandler=function(t,e,n){var r;return r=[],e&&r.push(e),t&&t.message&&r.push(t.message),n&&r.push(n),t&&r.push(t.stack?t.stack:t),console.error.apply(console,r)},function(){var t,e,r,o,i,a;a=function(){var t,e,n;for(n={},t=0,e=arguments.length;e>t;t++)n[arguments[t]]=!0;return n},i=a("instanceof","typeof","in","null","true","false","undefined","return"),e=function(){var t;return t=/[a-zA-Z\u0410-\u044F\u0401\u0451_\.\$]/,function(e){return e.match(t)}}(),r=function(t){return t.charCodeAt()>=48&&t.charCodeAt()<=57},o=function(){var t;return t=a("+","-",">","<","=","&","|","^","!","~"),function(e){return t[e]||!1}}(),t=a("=","+=","-=","++","--","|=","^=","&=","!=","<<=",">>="),n.utils.parsExpression=function(c,u){var s,l,f,h,p,d,v,m,g,y;return p=a.apply(null,(u=u||{}).input||[]),y=1,d=function(n){var i,a,c,u,s,l,f,h,p,v,m,g,w,b,x,k,E,O,_,C,T;for(w=n.line,b=n.result||[],v=n.index||0,g=n.level||0,E=n.stopKey||null,C="",m=null,T=[],x="",f="",k=!1,"",O="",_="",p="",u=0,h=null,l=function(){return p&&b.push({type:"free",value:p}),p=""};v<=w.length;)if(c=w[v-1],i=w[v++]||"",a=w[v],(k&&p||!i)&&l(),"string"!==k){if("key"===k){if(e(i)||r(i)){C+=i;continue}if("["===i){if(C+=i,!(s=d({line:w,index:v,level:g+1,stopKey:"]"})).stopKeyOk)throw"Error expression";v=s.index,C+="###"+s.uniq+"###]",T.push(s);continue}if("?"===i&&("."===a||"("===a||"["===a)){C+=i;continue}if("("===i){if(C+=i,!(s=d({line:w,index:v,level:g+1,stopKey:")"})).stopKeyOk)throw"Error expression";v=s.index,C+="###"+s.uniq+"###)",T.push(s);continue}m={type:"key",value:C,start:v-C.length-1,finish:v-1,children:T},b.push(m),k="",C="",T=[]}else if("sign"===k){if(o(i)){x+=i;continue}if("|"===x&&0===g&&0===u){h=w.substring(v-1),v=w.length+1;continue}(t[x]||"="===x[0]&&"="!==x[1])&&(m.assignment=!0),b.push({type:"sign",value:x}),k="",x=""}else if("digit"===k){if(r(i)||"."===i){f+=i;continue}b.push({type:"digit",value:f}),f=""}if(e(i))k="key",C+=i;else if(o(i))k="sign",x+=i;else if(r(i))k="digit",f+=i;else if('"'!==i&&"'"!==i){if(i===E)return l(),{result:b,index:v,stopKeyOk:!0,uniq:y++};"("===i&&u++,")"===i&&u--,"{"!==i?(":"===i&&"}"===E&&(m.type="free"),p+=i):(l(),s=d({line:w,index:v,level:g+1,stopKey:"}"}),b.push({type:"{}",child:s}),v=s.index)}else O=i,k="string",_+=i}else{if(i===O&&"\\"!==c){_+=i,b.push({type:"string",value:_}),_="",O="",k="";continue}_+=i}return l(),{result:b,index:v,filter:h}},f=d({line:c}),v={isSimple:!f.filter,simpleVariables:[]},f.filter?(v.expression=c.substring(0,c.length-f.filter.length-1),v.filter=f.filter):v.expression=c,m=function(t){var e;return{count:(e=t.split(/[\.\[\(\?]/)).length,firstPart:e[0]}},g=function(t,e){return e?"($$="+t+",$$==null)?undefined:":"($$=$$"+t+",$$==null)?undefined:"},h=function(t){return t.split(/[\.\[\(\?]/)[0]},l=function(t){var e,n,r,o,a,c,u,s,l,f;if("this"===t)return"$$scope";if(e=h(t),o=i[e]||p[e],"this"===e&&(t="$$scope"+t.slice(4),o=!0),1===(s=t.split("?")).length)return o?t:"$$scope."+t;for(o?(f=g(s[0],!0),n=s[0]):(f=g("scope."+s[0]),n="scope."+s[0]),r=0,c=(l=s.slice(1,s.length-1)).length;c>r;r++)"("===(u=l[r])[0]?f+=g(n+u,o):(f+=g(u),n+=u);return"("===(a=s[s.length-1])[0]?(o||(f+="$$"),f+=n+a):f+="$$"+a,"("+f+")"},s=function(t){var e,n,r,o,a,c,u,f,h,d,g,y,w;for(y="",o=0,u=(d=t.result).length;u>o;o++)if("key"!==(r=d[o]).type)y+="{}"!==r.type?r.value:"{"+s(r.child)+"}";else{if(r.assignment?(h="this"===(w=m(r.value)).firstPart?"$$scope"+r.value.substring(4):p[w.firstPart]?r.value:w.count<2?"($$scope.$$root || $$scope)."+r.value:"$$scope."+r.value,v.isSimple=!1):i[r.value]?h=r.value:(h=l(r.value),v.simpleVariables.push(h)),r.children.length)for(a=0,f=(g=r.children).length;f>a;a++)c="###"+(e=g[a]).uniq+"###",n=s(e),h=h.split(c).join(n);y+=h}return y},v.result=s(f),n.debug.parser&&console.log(c,v),v},n.utils.parsFilter=function(t){var e,r,o;for(o=[],t=t.trim();t;){if(!(e=t.match(/^(\w+)([^\w])(.*)$/))){if(!(e=t.match(/^(\w+)$/)))return null;o.push({name:e[1],args:[],raw:""});break}"|"===e[2]?(o.push({name:e[1],args:[],raw:""}),t=e[3]):(r=n.utils.parsArguments(e[3],{stop:"|"}),o.push({name:e[1],args:r.result,raw:e[3].slice(0,r.length)}),t=e[3].slice(r.length+1).trim())}return{result:o}},n.utils.parsArguments=function(t,e){var n,r,o,i,a,c,u,s;for(e=e||{},a=0,o=[],r="",i=0,u=!1,s=!1,c=function(){r&&(o.push(r),r="")};a<=t.length;)if(n=t[a]||"",a++,u)r+=n,'"'===n&&(u=!1);else if(s)r+=n,"'"===n&&(s=!1);else if('"'!==n)if("'"!==n)if(i)r+=n,"("===n&&i++,")"===n&&i--;else if(" "!==n&&","!==n){if(e.stop&&e.stop===n){c();break}"("===n&&(i=1),r+=n}else c();else r+=n,s=!0;else r+=n,u=!0;return c(),{result:o,length:a-1}}}(),function(){var t,e,r;n.utils.pars_start_tag="{{",n.utils.pars_finish_tag="}}",r=function(t){var e,r,o,i,a,c,u,s,l;return l=n.utils.pars_start_tag,r=n.utils.pars_finish_tag,u=[],i=0,c=0,o=function(e){var n;return e=e||1,n=t.substring(c,i-e),c=i,n},s=null,a=function(e,n,c){var l,f,h;for(e||(s={type:"expression",list:[]},u.push(s)),null,l=null;i<t.length;){if(f=l+(l=t[i]),h=t[i+=1],l===n)return;if(!c){if(f===r&&0===e)return s.list.push(o(2)),!0;"("===l?a(e+1,")"):"{"===l?a(e+1,"}"):'"'===l?a(e+1,'"',!0):"'"===l?a(e+1,"'",!0):"|"===l&&0===e&&("|"===h?i+=1:s.list.push(o()))}}},e=function(){var e,n,r,c;for(n=null,e=null;i<t.length;)if(n=e,e=t[i],i+=1,n+e===l){if((c=o(2))&&u.push({type:"text",value:c}),!a(0))throw"Wrong expression"+t;e=null}return(r=o(-1))?u.push({type:"text",value:r}):void 0},e(),n.debug.parser&&console.log("parsText",u),u},t={},e=function(t){var e,n;return function(){var r,o,i;for(i=[],r=0,o=t.length;o>r;r++)e=t[r],n={type:e.type,value:e.value},e.list&&(n.list=e.list.slice()),i.push(n);return i}()},n.utils.parsText=function(n){var o;return(o=t[n])||(t[n]=o=r(n)),e(o)}}(),function(){var t;n.utils.compile=t={},t.cache={},t.Function=Function,t.expression=function(e,r){var o,i,a,c,u,s,l;if(r=r||{},s=(e=e.trim())+"#",s+=r.no_return?"+":"-",s+=r.string?"s":"v",r.input&&(s+=r.input.join(",")),u=t.cache[s])return u;a=(u=n.utils.parsExpression(e,{input:r.input})).result,r.no_return||!1?l="var $$;"+a:r.string&&!u.filter?(l="var $$, __ = ("+a+"); return '' + (__ || (__ == null?'':__))",u.rawExpression="(__="+a+") || (__ == null?'':__)"):l="var $$;return ("+a+")";try{r.input?((o=r.input.slice()).unshift("$$scope"),o.push(l),c=t.Function.apply(null,o)):c=t.Function("$$scope",l)}catch(t){throw i=t,n.exceptionHandler(i,"Wrong expression: "+e,{src:e,cfg:r}),"Wrong expression: "+a}return u.fn=c,t.cache[s]=u},t.cacheText={},t.buildText=function(e,n){var r,o,i,a,c,u,s;if(i=t.cacheText[e])return function(){return i.call(n)};for(s=[],c=a=0,u=n.length;u>a;c=++a)"expression"===(r=n[c]).type?s.push(r.fn?"this["+c+"].fn(this.scope)":"((x=this["+c+"].value) || (x == null?'':x))"):r.value&&(o=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),s.push('"'+o+'"'));return s=s.join(" + "),i=t.Function("var x; return ("+s+")"),t.cacheText[e]=i,function(){return i.call(n)}},t.cacheSimpleText={},t.buildSimpleText=function(e,n){var r,o,i,a,c,u,s,l;if((c=e?t.cacheSimpleText[e]:null)||!n)return c||null;for(s=[],l=[],a=i=0,u=n.length;u>i;a=++i)"expression"===(r=n[a]).type?(s.push("("+r.re+")"),r.simpleVariables&&l.push.apply(l,r.simpleVariables)):r.value&&(o=r.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),s.push('"'+o+'"'));return s=s.join(" + "),c={fn:t.Function("$$scope","var $$, __; return ("+s+")"),simpleVariables:l},e&&(t.cacheSimpleText[e]=c),c}}(),A=function(t){var e,n,r;if(!t.length)return"el";for(r="el",e=0,n=t.length;n>e;e++)r+=".childNodes["+t[e]+"]";return r},T=function(t){var e,r,o,i,a,c;for(i=0,c=(o=n.utils.parsText(t)).length;c>i;i++)if("expression"===(r=o[i]).type){if(r.list.length>1)return null;if("#"===(a=r.list[0])[0])return null;if("="===a[0])return null;if("::"===a.slice(0,2))return null;if(!(e=n.utils.compile.expression(a,{string:!0})).rawExpression)throw"Error";r.re=e.rawExpression}return n.utils.compile.buildSimpleText(t,o).fn},n.core.fastBinding=function(t){return n.option.fastBinding&&!t.directive&&!t.hook&&t.fb?new C(t):void 0},C=function(t){var e,r,o,i;return o=[],(r=this).fastWatchFn=[],e=[],i=function(t,n){var a,c,u,s,l,f,h,p,d,v,m,g,y,w,b,x;if(t.dir)for(w=A(e),s=0,p=(m=t.dir).length;p>s;s++)a=m[s],o.push("s.dir("+r.fastWatchFn.length+", "+w+");"),r.fastWatchFn.push(a);if(t.attr)for(l=0,d=(g=t.attr).length;d>l;l++)x=(u=g[l]).value,f=u.attrName,w=A(e),c=T(x),b=x.replace(/"/g,'\\"').replace(/\n/g,"\\n"),c?(o.push('s.fw("'+b+'", '+r.fastWatchFn.length+", "+w+', "'+f+'");'),r.fastWatchFn.push(c)):o.push("s.wt('"+b+"', "+w+", '"+f+"');");if(t.text&&(w=A(e),c=T(t.text),b=t.text.replace(/"/g,'\\"').replace(/\n/g,"\\n"),c?(o.push('s.fw("'+b+'", '+r.fastWatchFn.length+", "+w+");"),r.fastWatchFn.push(c)):o.push('s.wt("'+b+'", '+w+");")),t.children)for(h=0,v=(y=t.children).length;v>h;h++)u=y[h],e.length=n+1,e[n]=u.index,i(u.fb,n+1)},i(t.fb,0),o=o.join("\n"),r.resultFn=n.utils.compile.Function("s","el","f$",o),this},C.prototype.bind=function(t,e){this.currentCD=t,this.resultFn(this,e,j)},C.prototype.dir=function(t,e){var n,r,o,i;r=this.fastWatchFn[t],n=this.currentCD,o=new m({attrName:r.attrName,attrArgument:r.attrArgument,changeDetector:n,fbData:r.fbData}),(i=r.fb.call(o,n.scope,e,r.value,o))&&i.start&&i.start()},C.prototype.fw=function(t,e,n,r){var o,i,a,c;o=this.currentCD,c={isStatic:!1,isArray:!1,extraLoop:!1,deep:!1,value:a=(i=this.fastWatchFn[e])(o.locals),callback:null,exp:i,src:t,onStop:null,el:n,ea:r||null},o.watchList.push(c),u(o.scope,c,a)},C.prototype.wt=function(t,e,n){this.currentCD.watchText(t,null,{element:e,elementAttr:n})},function(){var t,e,r,o,i,a,c,u;n.hooks.attribute.unshift({code:"events",fn:function(){var t;(t=this.attrName.match(/^\@([\w\.\-]+)$/))&&(this.ns="al",this.name="on",this.attrArgument=t[1])}}),n.hooks.eventModifier={},u=function(t,e){return n.hooks.eventModifier[t]={event:["keydown","keypress","keyup"],fn:function(t,n){t[e]||(n.stop=!0)}}},u("alt","altKey"),u("control","ctrlKey"),u("ctrl","ctrlKey"),u("meta","metaKey"),u("shift","shiftKey"),n.hooks.eventModifier.self=function(t,e){return t.target!==e.element?e.stop=!0:void 0},n.hooks.eventModifier.once={beforeExec:function(t,e){return e.unbind()}},r=function(t,e){var n,r,o,i,a,c;if(c={},"string"==typeof t?c.event=t:"object"==typeof t&&t.event&&(c.event=t.event),"string"==typeof c.event&&(c.event=c.event.split(/\s+/)),e&&c.event){for(o=!1,r=0,i=(a=c.event).length;i>r;r++)if(n=a[r],e.indexOf(n)>=0){o=!0;break}if(!o)return null}return j.isFunction(t)?c.fn=t:t.fn&&(c.fn=t.fn),t.beforeExec&&(c.beforeExec=t.beforeExec),t.init&&(c.init=t.init),c},n.d.al.on=function(e,r,o,a){var u,s;a.attrArgument&&(n.option.removeAttribute&&(r.removeAttribute(a.attrName),a.fbElement&&a.fbElement.removeAttribute(a.attrName)),s=a.attrArgument.split(".")[0],(u=function(){}).prototype=c(a.attrArgument,t[s]),o&&(u.prototype.fn=a.changeDetector.compile(o,{no_return:!0,input:["$event","$element","$value"]})),u.prototype.expression=o,a.fastBinding=function(t,e,n,r){var o,a,c,s,l,f;for((c=new u).scope=t,c.element=e,c.cd=r.changeDetector,o=function(t){return i(c,t)},s=0,l=(f=c.eventList).length;l>s;s++)a=f[s],j.on(e,a,o);c.initFn&&c.initFn(t,e,n,r),c.unbind=function(){var t,n,r;for(t=0,n=(r=c.eventList).length;n>t;t++)a=r[t],j.off(e,a,o)},r.changeDetector.watch("$destroy",c.unbind)},a.fastBinding(e,r,o,a))},a={enter:13,tab:9,delete:46,backspace:8,esc:27,space:32,up:38,down:40,left:37,right:39},t={click:{stop:!0,prevent:!0},dblclick:{stop:!0,prevent:!0},submit:{stop:!0,prevent:!0},keyup:{filterByKey:!0},keypress:{filterByKey:!0},keydown:{filterByKey:!0}},c=function(t,e){var o,i,c,u,s,l,f,h,p;for(i={attrArgument:t,throttle:null,throttleTime:0,debounce:null,debounceId:null,initFn:null,eventList:null,stop:(e=e||{}).stop||!1,prevent:e.prevent||!1,scan:!0,modifiers:[]},c=(o=t.split("."))[0],u=null,(h=n.hooks.eventModifier[c])&&((h=r(h)).event&&(i.eventList=h.event,h.fn&&i.modifiers.push(h),h.init&&(i.initFn=h.init))),i.eventList||(i.eventList=[c]),s=0,f=(p=o.slice(1)).length;f>s;s++)"stop"!==(l=p[s])?"prevent"!==l?"nostop"!==l?"noprevent"!==l?"noscan"!==l?"throttle-"!==l.substring(0,9)?"debounce-"!==l.substring(0,9)?(h=n.hooks.eventModifier[l])?(h=r(h,i.eventList))&&i.modifiers.push(h):e.filterByKey&&(null===u&&(u={}),a[l]&&(l=a[l]),u[l]=!0):i.debounce=Number(l.substring(9)):i.throttle=Number(l.substring(9)):i.scan=!1:i.prevent=!1:i.stop=!1:i.prevent=!0:i.stop=!0;return i.filterByKey=u,i},o=function(t,e){var n;return"checkbox"===(n=t.element).type?n.checked:"radio"===n.type?n.value||n.checked:e.component?e.value:n.value},e=function(t,e){var r,i,a,c,u;for(i=0,a=(u=t.modifiers).length;a>i;i++)(c=u[i]).beforeExec&&c.beforeExec(e,t);if(t.fn)try{t.fn(t.cd.locals,e,t.element,o(t,e))}catch(o){r=o,n.exceptionHandler(r,"Error in event: "+t.attrArgument+" = "+t.expression,{attr:t.attrArgument,exp:t.expression,scope:t.scope,cd:t.cd,element:t.element,event:e})}t.scan&&t.cd.scan()},i=function(t,n){var r,o,i,a,c,u;if(!t.filterByKey||t.filterByKey[n.keyCode]){if(t.modifiers.length)for((r=function(){}).prototype=t,(o=new r).stop=!1,i=0,a=(u=t.modifiers).length;a>i;i++)if((c=u[i]).fn&&(c.fn(n,o),o.stop))return;t.prevent&&n.preventDefault(),t.stop&&n.stopPropagation(),t.debounce?(t.debounceId&&clearTimeout(t.debounceId),t.debounceId=setTimeout((function(){return t.debounceId=null,e(t,n)}),t.debounce)):t.throttle?t.throttleTime<Date.now()&&(t.throttleTime=Date.now()+t.throttle,e(t,n)):e(t,n)}}}(),n.hooks.attribute.unshift({code:"directDirective",fn:function(){var t=this.attrName.match(/^(.*)\!$/);if(t){var e=t[1].replace(/(-\w)/g,(function(t){return t.substring(1).toUpperCase()})),r=this.cd.locals[e]||n.ctrl[e]||n.option.globalController&&window[e];j.isFunction(r)?this.directive=function(t,e,o,i){var a=i.changeDetector;if(o){for(var c=n.utils.parsArguments(o),u=Array(c.result.length),s=0;s<c.result.length;s++)u[s]=n.utils.compile.expression(c.result[s],{input:["$element","$env"]}).fn(a.locals,e,i);r.apply(a,u)}else r.call(a,t,e,o,i)}:(this.result="noDirective",this.stop=!0)}}}),n.hooks.attribute.unshift({code:"elementVariable",fn:function(){var t=this.attrName.match(/^#([\w\.]*)$/);t&&(this.directive=e,this.attrArgument=t[1])}}),n.d.al.value=function(t,e,n,r){var o,i;return r.fastBinding=!0,o=function(){r.setValue(n,e.value),i.refresh(),r.scan()},r.on(e,"input",o),r.on(e,"change",o),i=r.watch(n,(function(t){return null==t&&(t=""),e.value=t,"$scanNoChanges"}))},n.d.al.checked=function(t,e,r,o){function i(t){var r=o.takeAttr(t);return n.option.removeAttribute&&(e.removeAttribute(t),o.fbElement&&o.fbElement.removeAttribute(t)),r}function a(t,e){var n=i(e);if(n)return u.opt[t]=n,!0;var r=i(":"+e)||i("al-attr."+e);return r?(u.watch.push([r,t]),!0):void 0}function c(t,e,n){for(var r in e.fbData.opt)t[r]=e.fbData.opt[r];for(var o=function(r){var o=r[1];e.watch(r[0],(function(e){t[o]=e,n()}))},i=0,a=e.fbData.watch;i<a.length;i++){o(a[i])}}var u=o.fbData={opt:{},watch:[]};a("value","value")?o.fastBinding=function(t,e,n,r){function o(){return e.checked=a&&a.indexOf(u.value)>=0,"$scanNoChanges"}var i,a=null,u={};c(u,r,o),i=r.watch(n,(function(t){a=t,Array.isArray(a)||(a=null),o()}),{isArray:!0}),r.on(e,"change",(function(){if(a||(a=[],r.setValue(n,a)),e.checked)a.indexOf(u.value)<0&&a.push(u.value);else{var t=a.indexOf(u.value);t>=0&&a.splice(t,1)}i.refresh(),r.scan()}))}:(a("true","true-value"),a("false","false-value"),o.fastBinding=function(t,e,n,r){function o(){return e.checked=i===u.true,"$scanNoChanges"}var i,a,u={true:!0,false:!1};c(u,r,o),a=r.watch(n,(function(t){i=t,o()})),r.on(e,"change",(function(){i=e.checked?u.true:u.false,r.setValue(n,i),a.refresh(),r.scan()}))}),o.fastBinding(t,e,r,o)},n.d.al.if=function(t,e,r,o){var i;return o.elementCanBeRemoved?(n.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:t,element:e,value:r,env:o}),{}):(o.stopBinding=!0,i={item:null,childCD:null,base_element:null,top_element:null,start:function(){i.prepare(),i.watchModel()},prepare:function(){i.base_element=e,i.top_element=document.createComment(" "+o.attrName+": "+r+" "),j.before(e,i.top_element),j.remove(e)},updateDom:function(t){t?i.insertBlock(t):i.removeBlock()},removeBlock:function(){i.childCD&&(i.childCD.destroy(),i.childCD=null,i.removeDom(i.item),i.item=null)},insertBlock:function(){i.childCD||(i.item=i.base_element.cloneNode(!0),i.insertDom(i.top_element,i.item),i.childCD=o.changeDetector.new(),n.bind(i.childCD,i.item,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName}))},watchModel:function(){o.watch(r,i.updateDom)},removeDom:function(t){j.remove(t)},insertDom:function(t,e){j.after(t,e)}})},n.d.al.ifnot=function(t,e,r,o){var i;return(i=n.d.al.if(t,e,r,o)).updateDom=function(t){t?i.removeBlock():i.insertBlock()},i},n.directives.al.repeat={restrict:"AM",init:function(t,e,r,o){var i,a;return o.elementCanBeRemoved?(n.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:t,element:e,value:r,env:o}),{}):(o.stopBinding=!0,i=o.changeDetector,a={start:function(){a.parsExpression(),a.prepareDom(),a.buildUpdateDom(),a.watchModel()},parsExpression:function(){var t,e;if("("===(e=r.trim())[0])if(a.objectMode=!0,t=e.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s+orderBy:(.+)\s*$/))a.objectKey=t[1],a.objectValue=t[2],a.expression=t[3]+" | toArray:"+a.objectKey+","+a.objectValue+" | orderBy:"+t[4],a.nameOfKey="$item",a.trackExpression="$item."+a.objectKey;else{if(!(t=e.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s*$/)))throw"Wrong repeat: "+r;a.objectKey=t[1],a.objectValue=t[2],a.expression=t[3]+" | toArray:"+a.objectKey+","+a.objectValue,a.nameOfKey="$item",a.trackExpression="$item."+a.objectKey}else{if((t=e.match(/(.*) track by ([\w\.\$\(\)]+)/))&&(a.trackExpression=t[2],e=t[1]),!(t=e.match(/\s*(\w+)\s+in\s+(.+)/)))throw"Wrong repeat: "+r;a.nameOfKey=t[1],a.expression=t[2]}},watchModel:function(){var t;t=a.objectMode?{deep:!0}:{isArray:!0},a.watch=i.watch(a.expression,a.updateDom,t)},prepareDom:function(){var t,i,c,u,s;if(8===e.nodeType){for(a.top_element=e,a.element_list=i=[],t=e.nextSibling;t;){if(8===t.nodeType&&("/directive:"===(s=t.nodeValue.trim().split(/\s+/))[0]&&"al-repeat"===s[1])){o.skipToElement=t;break}i.push(t),t=t.nextSibling}for(c=0,u=i.length;u>c;c++)t=i[c],j.remove(t)}else a.base_element=e,a.top_element=document.createComment(" "+r+" "),j.before(e,a.top_element),j.remove(e),n.option.removeAttribute&&e.removeAttribute(o.attrName)},makeChild:function(t,e,n){var r;return r=i.new(null,{locals:!0}),a.updateLocals(r,t,e,n),r},updateLocals:function(t,e,n,r){var o;o=t.locals,a.objectMode?(o[a.objectKey]=e[a.objectKey],o[a.objectValue]=e[a.objectValue]):o[a.nameOfKey]=e,o.$index=n,o.$first=0===n,o.$last=n===r.length-1},rawUpdateDom:function(t,e){var n,r,o,i,a,c;for(r=0,a=t.length;a>r;r++)n=t[r],j.remove(n);for(i=0,c=e.length;c>i;i++)o=e[i],j.after(o.after,o.element)},buildUpdateDom:function(){return a.updateDom=function(){var t,r,c,u,s,l,f,h,p,d,v,m,g;return v=[],l=0,c=null,g=0,m=o.skippedAttr(),"$index"===a.trackExpression?(f={},p=function(){return f[l]||null},h=function(t){null!=t.$id&&delete f[t.$id]},d=function(t,e){e.$id=l,f[l]=e}):a.trackExpression?(f={},t=function(){var t;return t=i.compile(a.trackExpression,{input:["$id",a.nameOfKey]}),function(e,n){return t(i.scope,e,n)}}(),r=function(t){var e;return(e=t.$alite_id)?e:e=t.$alite_id=n.utils.getId()},p=function(e){var n;return null!=(n=t(r,e))?f[n]:null},h=function(t){var e;null!=(e=t.$id)&&delete f[e]},d=function(e,n){var o;o=t(r,e),n.$id=o,f[o]=n}):window.Map?(f=new Map,p=function(t){return f.get(t)},h=function(t){f.delete(t.item)},d=function(t,e){f.set(t,e)}):(f={},p=function(t){var e;return"object"!=typeof t?f[t]||null:(e=t.$alite_id)?f[e]:null},h=function(t){var e;e=t.$id,f[e]&&(t.$id=null,delete f[e])},d=function(t,e){var r;"object"==typeof t?(r=n.utils.getId(),t.$alite_id=r,e.$id=r,f[r]=e):(e.$id=t,f[t]=e)}),u=[],s=function(t){var e,n;if("object"!==(n=typeof t)){if("number"===n)e=Math.floor(t);else if("string"===n&&(e=Math.floor(t),isNaN(e)))return[];if(e<u.length)u.length=e;else for(;u.length<e;)u.push(u.length);return u}return t&&t.length?t:[]},a.element_list?function(t){var e,r,i,c,u,f,g,y,w,b,x,k,E,O,_,C,T,A,j,N,L,D,$,S,B,I,V,M,G,P,R,F,H,z,J,K,Z;for(B=s(t),C=a.top_element,c=[],P=[],w=0,T=v.length;T>w;w++)(G=v[w]).active=!1;for(l=E=0,A=B.length;A>E;l=++E)x=B[l],(G=p(x))&&(G.active=!0);for(u=[],O=0,j=v.length;j>O;O++)if(!(G=v[O]).active){for(G.prev&&(G.prev.next=G.next),G.next&&(G.next.prev=G.prev),h(G),G.CD.destroy(),_=0,N=(J=G.element_list).length;N>_;_++)f=J[_],u.push(f);G.next=null,G.prev=null,G.element_list=null}for(e=[],null,z=null,H=!1,g=a.element_list.length-1,l=I=0,L=B.length;L>I;l=++I)if(k=x=B[l],G=p(x)){if(a.updateLocals(G.CD,x,l,B),G.prev===z){if(H)for(V=0,D=(K=G.element_list).length;D>V;V++)f=K[V],c.push({element:f,after:C}),C=f;z=G,C=G.element_list[g],G.active=!0,P.push(G);continue}for(G.prev=z,z&&(z.next=G),R=0,$=(Z=G.element_list).length;$>R;R++)f=Z[R],c.push({element:f,after:C}),C=f;H=!0,z=G,G.active=!0,P.push(G)}else i=a.makeChild(k,l,B),y=function(){var t,n,o,u;for(u=[],n=0,t=(o=a.element_list).length;t>n;n++)r=o[n],f=r.cloneNode(!0),e.push({cd:i,el:f}),c.push({element:f,after:C}),u.push(C=f);return u}(),d(x,G={CD:i,element_list:y,prev:z,next:null,active:!0,item:x}),z?(M=z.next,z.next=G,G.next=M,M&&(M.prev=G)):0===l&&v[0]&&(M=v[0],G.next=M,M.prev=G),z=G,P.push(G);for(v=P,a.rawUpdateDom(u,c),u.length=0,c.length=0,F=0,S=e.length;S>F;F++)b=e[F],n.bind(b.cd,b.el,{skip_attr:m,elementCanBeRemoved:o.attrName,noDomOptimization:!0})}:function(t){var r,i,u,f,y,w,b,x,k,E,O,_,C,T,A,j,N,L,D,$,S,B;for(j=s(t),_=a.top_element,g++,u=[],D=[],r=[],null,S=null,$=!1,l=w=0,C=j.length;C>w;l=++w)if(k=x=j[l],L=p(x)){if(a.updateLocals(L.CD,x,l,j),L.prev===S){$&&u.push({element:L.element,after:S.element}),S=L,_=L.element,L.version=g,D.push(L);continue}L.prev=S,S&&(S.next=L),u.push({element:L.element,after:_}),$=!0,_=L.element,S=L,L.version=g,D.push(L)}else i=a.makeChild(k,l,j),e=a.base_element.cloneNode(!0),null===c?(y=a.base_element.cloneNode(!0),B=n.bind(i,e,{skip_attr:m,elementCanBeRemoved:o.attrName,noDomOptimization:!0,fbElement:y}),(c=n.core.fastBinding(B)||!1)&&(a.base_element=y)):r.push({cd:i,el:e}),u.push({element:e,after:_}),_=e,d(x,L={CD:i,element:e,prev:S,next:null,version:g,item:x}),S?(N=S.next,S.next=L,L.next=N,N&&(N.prev=L)):0===l&&v[0]&&(N=v[0],L.next=N,N.prev=L),S=L,D.push(L);for(f=[],E=0,T=v.length;T>E;E++)(L=v[E]).version!==g&&(L.prev&&(L.prev.next=L.next),L.next&&(L.next.prev=L.prev),h(L),L.CD.destroy(),f.push(L.element),L.next=null,L.prev=null,L.element=null);for(v=D,a.rawUpdateDom(f,u),f.length=0,u.length=0,O=0,A=r.length;A>O;O++)b=r[O],c?c.bind(b.cd,b.el):n.bind(b.cd,b.el,{skip_attr:m,elementCanBeRemoved:o.attrName,noDomOptimization:!0})}}()}})}},n.d.al.init=function(t,e,r,o){var i,a,c,u,s;n.option.removeAttribute&&(e.removeAttribute(o.attrName),o.fbElement&&o.fbElement.removeAttribute(o.attrName)),i=o.changeDetector,s=["$element"],"window"===o.attrArgument&&s.push("window");try{u=i.compile(r,{no_return:!0,input:s}),o.fastBinding=c=function(t,e,n,r){return u(r.changeDetector.locals,e,window)},c(0,e,0,o)}catch(c){a=c,n.exceptionHandler(a,"al-init, error in expression: "+r,{exp:r,scope:t,cd:i,element:e}),o.fastBinding=function(){}}},n.d.al.app={stopBinding:!0},n.d.al.stop={restrict:"AE",stopBinding:!0},n.d.al.cloak=function(t,e,n,r){e.removeAttribute(r.attrName),n&&j.removeClass(e,n)},n.d.al.html={restrict:"AM",priority:100,modifier:{},link:function(t,e,r,o){var i;return o.elementCanBeRemoved&&8!==e.nodeType?(n.exceptionHandler(null,o.attrName+" can't control element because of "+o.elementCanBeRemoved,{scope:t,element:e,value:r,env:o}),{}):(o.stopBinding=!0,i={baseElement:null,topElement:null,activeElement:null,childCD:null,name:r,watchMode:null,start:function(){i.parsing(),i.prepare(),i.watchModel()},parsing:function(){var a,c,u,s;if(o.attrArgument)for(a=0,c=(s=o.attrArgument.split(".")).length;c>a;a++)"literal"!==(u=s[a])?"tpl"!==u?n.d.al.html.modifier[u]&&n.d.al.html.modifier[u](i,{scope:t,element:e,inputName:r,env:o}):i.watchMode="tpl":i.watchMode="literal"},prepare:function(){8===e.nodeType?(i.baseElement=null,i.topElement=e,o.watch("$destroy",i.removeBlock)):(i.baseElement=e,i.topElement=document.createComment(" "+o.attrName+": "+r+" "),j.before(e,i.topElement),j.remove(e))},removeBlock:function(){var t,e,n,r;if(i.childCD&&(i.childCD.destroy(),i.childCD=null),i.activeElement){if(Array.isArray(i.activeElement))for(e=0,n=(r=i.activeElement).length;n>e;e++)t=r[e],i.removeDom(t);else i.removeDom(i.activeElement);i.activeElement=null}},insertBlock:function(t){var e,r,a;if(i.baseElement)i.activeElement=i.baseElement.cloneNode(!1),i.activeElement.innerHTML=t,i.insertDom(i.topElement,i.activeElement),i.childCD=o.changeDetector.new(),n.bind(i.childCD,i.activeElement,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName});else for((a=document.createElement("body")).innerHTML=t,e=i.topElement,i.activeElement=[],i.childCD=o.changeDetector.new();r=a.firstChild;)i.insertDom(e,r),e=r,i.activeElement.push(r),n.bind(i.childCD,e,{skip_attr:o.skippedAttr(),elementCanBeRemoved:o.attrName})},updateDom:function(t){i.removeBlock(),t&&i.insertBlock(t)},removeDom:function(t){j.remove(t)},insertDom:function(t,e){j.after(t,e)},watchModel:function(){"literal"===i.watchMode?i.updateDom(i.name):"tpl"===i.watchMode?o.watchText(i.name,i.updateDom):o.watch(i.name,i.updateDom)}})}},n.d.al.html.modifier.id=function(t){return t.updateDom=function(e){var n,r;t.removeBlock(),(r=document.getElementById(e))&&((n=r.innerHTML)&&t.insertBlock(n))}},n.d.al.html.modifier.url=function(t){return t.loadHtml=function(t){j.ajax(t)},t.updateDom=function(e){return e?void t.loadHtml({cache:!0,url:e,success:function(e){t.removeBlock(),t.insertBlock(e)},error:t.removeBlock}):void t.removeBlock()}},n.d.al.html.modifier.scope=function(t,e){var r,o,i,a;if(2===(r=t.name.split(":")).length)t.name=r[0],a=r[1];else{if(r=t.name.match(/(.+)\:\s*\:\:([\d\w]+)$/))i=!0;else if(i=!1,!(r=t.name.match(/(.+)\:\s*([\.\w]+)$/)))throw"Wrong expression "+t.name;t.name=r[1],a=r[2]}return o="outer",t.insertBlock=function(r){var c,u,s;t.activeElement=t.baseElement.cloneNode(!1),t.activeElement.innerHTML=r,t.insertDom(t.topElement,t.activeElement),u=e.env.changeDetector,(c=t.childCD=u.new(null,{locals:!0})).locals[o]=null,s=u.watch(a,(function(t){return c.locals[o]=t}),{oneTime:i}),t.childCD.watch("$destroy",(function(){return s.stop()})),n.bind(t.childCD,t.activeElement,{skip_attr:e.env.skippedAttr()})}},n.d.al.html.modifier.inline=function(t,e){var n;return n=t.prepare,t.prepare=function(){return n(),e.env.setValue(t.name,t.baseElement.innerHTML)}},n.d.al.radio=function(t,e,n,r){var o,i,a;return o=r.takeAttr("al-value"),i=o?r.eval(o):r.takeAttr("value"),r.on(e,"change",(function(){r.setValue(n,i),a.refresh(),r.scan()})),a=r.watch(n,(function(t){return e.checked=i===t,"$scanNoChanges"}))},function(){var t;window.Map?((t=function(){return this.idByItem=new Map,this.itemById={},this.index=1,this}).prototype.acquire=function(t){var e;return e="i"+this.index++,this.idByItem.set(t,e),this.itemById[e]=t,e},t.prototype.release=function(t){var e;e=this.itemById[t],delete this.itemById[t],this.idByItem.delete(e)},t.prototype.replace=function(t,e){var n;n=this.itemById[t],this.idByItem.delete(n),this.idByItem.set(e,t),this.itemById[t]=e},t.prototype.getId=function(t){return this.idByItem.get(t)},t.prototype.getItem=function(t){return this.itemById[t]||null}):((t=function(){return this.itemById={"i#null":null},this}).prototype.acquire=function(t){var e;return null===t?"i#null":("object"==typeof t?(e=t.$alite_id)||(t.$alite_id=e=n.utils.getId()):e=""+t,this.itemById[e]=t,e)},t.prototype.release=function(t){delete this.itemById[t]},t.prototype.replace=function(t,e){this.itemById[t]=e},t.prototype.getId=function(t){return null===t?"i#null":"object"==typeof t?t.$alite_id:""+t},t.prototype.getItem=function(t){return this.itemById[t]||null}),n.d.al.select=function(e,r,o,i){var a,c,u,s,l,f;return a=i.changeDetector.new(),i.stopBinding=!0,a.$select={mapper:u=new t},c=null,a.$select.change=function(){return n.nextTick((function(){return l(c)}))},l=function(t){var e;return(e=u.getId(t))?r.value=e:r.selectedIndex=-1},f=a.watch(o,(function(t){return c=t,l(t)})),s=function(t){return c=u.getItem(t.target.value),a.setValue(o,c),f.refresh(),a.scan()},i.on(r,"input",s),i.on(r,"change",s),n.bind(a,r,{skip_attr:i.skippedAttr()})},n.d.al.option=function(t,e,r,o){var i,a,c,u,s,l;for(i=l=o.changeDetector,c=0;4>=c&&!(s=l.$select);++c)l=l.parent||{};return s?(u=s.mapper,a=null,i.watch(r,(function(t){a?u.getId(t)!==a?(u.release(a),a=u.acquire(t),e.value=a,s.change()):u.replace(a,t):(a=u.acquire(t),e.value=a,s.change())})),void i.watch("$destroy",(function(){return u.release(a),s.change()}))):void n.exceptionHandler("","Error in al-option - al-select is not found",{cd:i,scope:i.scope,element:e,value:r})}}(),function(){var t;n.hooks.attribute.unshift({code:"attribute",fn:function(){var t,e;(t=this.attrName.match(/^\:([\w\.\-]+)$/))&&("html"===(e=t[1]).split(".")[0]?(this.name="html",e=e.substring(5)):this.name="attr",this.ns="al",this.attrArgument=e)}}),t={checked:"checked",readonly:"readOnly",value:"value",selected:"selected",muted:"muted",disabled:"disabled",hidden:"hidden"},n.d.al.attr=function(e,r,o,i){var a,c,u,s,l,f,h,p,d,v;if(i.attrArgument){if(u=i.attrArgument.split("."),c=u[0],h=t[c],l=u.indexOf("tpl")>0,n.option.removeAttribute&&(r.removeAttribute(i.attrName),i.fbElement&&i.fbElement.removeAttribute(i.attrName)),a={readOnly:!0},p=null,"style"===c){if(!u[1])throw"Style is not declared";d=u[1].replace(/(-\w)/g,(function(t){return t.substring(1).toUpperCase()})),p=function(t,e){return null==e&&(e=""),t.style[d]=e}}else"class"===c&&u.length>1?(l=!1,f=u.slice(1),p=function(t,e){var n,r,o,i,a;if(e)for(r=0,i=f.length;i>r;r++)n=f[r],j.addClass(t,n);else for(o=0,a=f.length;a>o;o++)n=f[o],j.removeClass(t,n)}):"focus"===c?p=function(t,e){return e?t.focus():t.blur()}:h?p=function(t,e){return void 0===e&&(e=null),t[h]!==e?t[h]=e:void 0}:(a.element=r,a.elementAttr=c);v=l?"watchText":"watch",s=p?function(t,e,n,r){return r.changeDetector[v](o,(function(t){return p(e,t)}),a)}:function(t,e,n,r){return r.changeDetector[v](o,null,{readOnly:!0,element:e,elementAttr:c})},s(e,r,o,i),i.fastBinding=s}}}(),n.d.al.model=function(t,e,r,o){var i;if("select"===(i=e.nodeName.toLowerCase()))return n.d.al.select.call(this,t,e,r,o);if("input"===i){if("checkbox"===e.type)return n.d.al.checked.call(this,t,e,r,o);if("radio"===e.type)return n.d.al.radio.call(this,t,e,r,o)}return n.d.al.value.call(this,t,e,r,o)},n.filters.slice=function(t,e,n){return t?n?t.slice(e,n):t.slice(e):null},function(){var t;t=function(t){return 10>t?"0"+t:""+t},n.filters.date=function(e,n){var r,o,i,a,c;if(!e)return"";for(a=n,o=0,i=(c=[[/yyyy/g,(e=new Date(e)).getFullYear()],[/mm/g,t(e.getMonth()+1)],[/dd/g,t(e.getDate())],[/HH/g,t(e.getHours())],[/MM/g,t(e.getMinutes())],[/SS/g,t(e.getSeconds())]]).length;i>o;o++)r=c[o],a=a.replace(r[0],r[1]);return a}}(),n.filters.json={watchMode:"deep",fn:function(t){return JSON.stringify(n.utils.clone(t),null,4)}},n.filters.filter=function(t,e,n){var r,o,i,a,c,u,s,l,f,h,p;if(2===arguments.length)c=null,p=e;else{if(3!==arguments.length)return t;c=e,p=n}if(!t||null==p||""===p)return t;if(l=[],f=(""+p).toLowerCase(),c)for(o=0,u=t.length;u>o;o++)(r=t[o])[c]===p?l.push(r):(""+r[c]).toLowerCase().indexOf(f)>=0&&l.push(r);else for(i=0,s=t.length;s>i;i++)for(a in r=t[i])(h=r[a])===p?l.push(r):(""+h).toLowerCase().indexOf(f)>=0&&l.push(r);return l},n.filters.orderBy=function(t,e,n){return!t instanceof Array?null:(n=n?1:-1,t.sort((function(t,r){return t[e]<r[e]?-n:t[e]>r[e]?n:0})))},n.filters.throttle={init:function(t,e,n){var r;return e=Number(e),r=null,{onChange:function(t){return r&&clearTimeout(r),r=setTimeout((function(){return r=null,n.setValue(t),n.changeDetector.scan()}),e)}}}},n.filters.toArray={init:function(t,e,n){var r,o,i;return 2===n.conf.args.length?(r=n.conf.args[0],i=n.conf.args[1]):(r="key",i="value"),o=[],{watchMode:"deep",onChange:function(t){var e,a,c;for(a in o.length=0,t)c=t[a],(e={})[r]=a,e[i]=c,o.push(e);return n.setValue(o)}}}},n.filters.storeTo={init:function(t,e,n){return{onChange:function(t){return n.changeDetector.setValue(e,t),n.setValue(t)}}}},n.text["="]=function(t,e,r,o){var i;if((i=n.utils.compile.expression(e)).filters)throw"Conflict: bindonce and filters, use one-time binding";o.finally(i.fn(o.changeDetector.locals))},n.text["::"]=function(t,e,n,r){r.changeDetector.watch(e,(function(t){return r.finally(t)}),{oneTime:!0})},function(){function t(t){return t.replace(/(-\w)/g,(function(t){return t.substring(1).toUpperCase()}))}function e(e){var n,o=e.listener,i=e.childCD,a=e.name,c=e.parentName,u=e.parentCD,s={};if(a=t(a),o&&!0!==o)if(r.isFunction(o))n=o;else{if(n=o.onChange,"copy"===o||"copy"===o.watchMode)return void(n?n(c):i.scope[a]=c);("array"===o||"array"===o.watchMode)&&(s.isArray=!0),("deep"===o||"deep"===o.watchMode)&&(s.deep=!0)}n||(n=function(t){i.scope[a]=t,i.scan()}),u.watch(c,n,s)}var r=n.f$;n.component=function(o,i){var a,c,u=o.match(/^(\w+)[\-](.+)$/);u?(a=u[1],c=u[2]):(a="$global",c=o),c=t(c),n.d[a]||(n.d[a]={}),n.d[a][c]={restrict:"E",stopBinding:!0,priority:n.priority.$component,init:function(t,a,c,u){function s(t,n){var r=":"+t,o=d.takeAttr(r);if(!o){if(!(o=d.takeAttr(t)))return;n="copy"}e({childCD:p,listener:n,name:t,parentName:o,parentCD:h})}function l(){N||h.digest(),n.bind(p,a,{skip:!0})}var f={$sendEvent:function(t,e){var n=new CustomEvent(t);n.value=e,n.component=!0,a.dispatchEvent(n)}},h=u.changeDetector.new(),p=n.ChangeDetector(f),d=new m({element:a,attributes:u.attributes,changeDetector:p,parentChangeDetector:h});try{var v=i.call(p,f,a,d)||{}}catch(t){return void n.exceptionHandler(t,"Error in component <"+o+">: ",{element:a,scope:f,cd:p})}v.onStart&&p.watch("$finishBinding",(function(){v.onStart(),p.scan()}));var g=!1;h.watch("$destroy",(function(){g=!0,p.destroy()})),p.watch("$destroy",(function(){v.onDestroy&&v.onDestroy(),g||h.destroy()}));for(var y=0,w=a.attributes;y<w.length;y++){if("#"===(C=w[y]).name[0]){var b=C.name.slice(1);if(b){v.api?h.setValue(b,v.api):h.setValue(b,f);break}}}if(v.props)if(Array.isArray(v.props))for(var x=0,k=v.props;x<k.length;x++){s(E=k[x],!0)}else for(var E in v.props)s(E,v.props[E]);else for(var O=0,_=a.attributes;O<_.length;O++){var C,T=(C=_[O]).name,A=C.value;if(A){var j=T.match(/^\:(.*)$/);j&&e({childCD:p,name:j[1],parentName:A,parentCD:h})}}var N=!1;if(h.watch("$onScanOnce",(function(){return N=!0})),v.template&&(a.innerHTML=v.template),v.templateId){var L=document.getElementById(v.templateId);if(!L)throw"No template "+v.templateId;a.innerHTML=L.innerHTML}v.templateUrl?r.ajax({url:v.templateUrl,cache:!0,success:function(t){a.innerHTML=t,l()},error:function(){console.error("Template is not loaded",v.templateUrl)}}):l()}}}}(),n}var n=e();n.makeInstance=e,"function"==typeof alightInitCallback?alightInitCallback(n):"function"==typeof define?define((function(){return n})):"object"==typeof t.exports?t.exports=n:(n.option.globalController=!0,window.alight=n,n.f$.ready(n.bootstrap))}()}));var i={};
/*!
* rete v1.0.0-alpha.9 
* (c) 2018 Ni55aN License 
* Released under the MIT license.
*/!function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",s=t.regeneratorRuntime;if(s)i=s;else{(s=t.regeneratorRuntime=i).wrap=w;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={},v={};v[a]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(N([])));g&&g!==n&&r.call(g,a)&&(v=g);var y=E.prototype=x.prototype=Object.create(v);k.prototype=y.constructor=E,E.constructor=k,E[u]=k.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(y),t},s.awrap=function(t){return{__await:t}},O(_.prototype),_.prototype[c]=function(){return this},s.AsyncIterator=_,s.async=function(t,e,n,r){var o=new _(w(t,e,n,r));return s.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(y),y[u]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=N,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}}}function w(t,e,n,r){var o,i,a,c,u=e&&e.prototype instanceof x?e:x,s=Object.create(u.prototype),v=new j(r||[]);return s._invoke=(o=t,i=n,a=v,c=l,function(t,e){if(c===h)throw new Error("Generator is already running");if(c===p){if("throw"===t)throw e;return L()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=C(n,a);if(r){if(r===d)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===l)throw c=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=h;var u=b(o,i,a);if("normal"===u.type){if(c=a.done?p:f,u.arg===d)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=p,a.method="throw",a.arg=u.arg)}}),s}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function E(){}function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,a){var c=b(t[n],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?Promise.resolve(s.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(s).then((function(t){u.value=t,i(u)}),a)}a(c.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=b(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:L}}function L(){return{value:e,done:!0}}}(function(){return this}()||Function("return this")()),i=function(){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t){return function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,i){try{var a=e[o](i),c=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(c).then((function(t){r("next",t)}),(function(t){r("throw",t)}));t(c)}("next")}))}},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},l=function(){function t(e){if(n(this,t),this.constructor===t)throw new TypeError("Can not construct abstract class.");this.name=e,this.data={},this.engine=null}return r(t,[{key:"worker",value:function(){}}]),t}(),f=function(){function t(e){if(n(this,t),this.constructor===t)throw new TypeError("Can not construct abstract class.");this.key=e,this.data={},this.parent=null}return r(t,[{key:"getNode",value:function(){if(null===this.parent)throw new Error("Control isn't added to Node/Input");return this.parent instanceof b?this.parent:this.parent.node}},{key:"getData",value:function(t){return this.getNode().data[t]}},{key:"putData",value:function(t,e){this.getNode().data[t]=e}}]),t}(),h=function(){function t(e,r){n(this,t),this.output=e,this.input=r,this.data={},this.input.addConnection(this)}return r(t,[{key:"remove",value:function(){this.input.removeConnection(this),this.output.removeConnection(this)}}]),t}(),p=function(){function e(t,r,o,i){n(this,e),this.node=null,this.multipleConnections=i,this.connections=[],this.key=t,this.name=r,this.socket=o}return r(e,[{key:"removeConnection",value:function(e){if(!(e instanceof h))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+function e(n,r){if(void 0===r&&(r=0),r+=1,null===n)return"null";if(void 0===n)return"void";if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)return void 0===n?"undefined":t(n);if(Array.isArray(n)){if(0<n.length){if(4<r)return"[...]";var o=e(n[0],r);return n.every((function(t){return e(t,r)===o}))?o.trim()+"[]":"["+n.slice(0,15).map((function(t){return e(t,r)})).join(", ")+(15<=n.length?", ...":"")+"]"}return"Array"}var i=Object.keys(n);if(!i.length)return n.constructor&&n.constructor.name&&"Object"!==n.constructor.name?n.constructor.name:"Object";if(4<r)return"{...}";var a="  ".repeat(r-1),c=i.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+e(n[t],r)+";"})).join("\n  "+a);return 15<=i.length&&(c+="\n  "+a+"..."),n.constructor&&n.constructor.name&&"Object"!==n.constructor.name?n.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}(e));this.connections.splice(this.connections.indexOf(e),1)}},{key:"removeConnections",value:function(){var t=this;this.connections.map((function(e){return t.removeConnection(e)}))}}]),e}(),d=function(){function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(n(this,t),"string"!=typeof e)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+v(e));this.name=e,this.data=r,this.compatible=[]}return r(t,[{key:"combineWith",value:function(e){if(!(e instanceof t))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+v(e));this.compatible.push(e)}},{key:"compatibleWith",value:function(e){if(!(e instanceof t))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+v(e));return this===e||this.compatible.includes(e)}}]),t}();function v(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=v(e[0],n);return e.every((function(t){return v(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return v(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+v(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var m=function(t){function e(t,r,o){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(n(this,e),"string"!=typeof t)throw new TypeError('Value of argument "key" violates contract.\n\nExpected:\nstring\n\nGot:\n'+g(t));if("string"!=typeof r)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+g(r));if(!(o instanceof d))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+g(o));if("boolean"!=typeof i)throw new TypeError('Value of argument "multiConns" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+g(i));var a=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,o,i));return a.control=null,a}return a(e,p),r(e,[{key:"hasConnection",value:function(){return 0<this.connections.length}},{key:"addConnection",value:function(t){if(!(t instanceof h))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+g(t));if(!this.multipleConnections&&this.hasConnection())throw new Error("Multiple connections not allowed");this.connections.push(t)}},{key:"addControl",value:function(t){if(!(t instanceof f))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+g(t));(this.control=t).parent=this}},{key:"showControl",value:function(){return!this.hasConnection()&&null!==this.control}},{key:"toJSON",value:function(){return{connections:this.connections.map((function(t){return{node:t.output.node.id,output:t.output.key,data:t.data}}))}}}]),e}();function g(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=g(e[0],n);return e.every((function(t){return g(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return g(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+g(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var y=function(t){function e(t,r,o){var i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];if(n(this,e),"string"!=typeof t)throw new TypeError('Value of argument "key" violates contract.\n\nExpected:\nstring\n\nGot:\n'+w(t));if("string"!=typeof r)throw new TypeError('Value of argument "title" violates contract.\n\nExpected:\nstring\n\nGot:\n'+w(r));if(!(o instanceof d))throw new TypeError('Value of argument "socket" violates contract.\n\nExpected:\nSocket\n\nGot:\n'+w(o));if("boolean"!=typeof i)throw new TypeError('Value of argument "multiConns" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+w(i));return c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,o,i))}return a(e,p),r(e,[{key:"hasConnection",value:function(){return 0<this.connections.length}},{key:"connectTo",value:function(t){if(!(t instanceof m))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+w(t));if(!this.socket.compatibleWith(t.socket))throw new Error("Sockets not compatible");if(!t.multipleConnections&&t.hasConnection())throw new Error("Input already has one connection");if(!this.multipleConnections&&this.hasConnection())throw new Error("Output already has one connection");var e=new h(this,t);return this.connections.push(e),e}},{key:"connectedTo",value:function(t){if(!(t instanceof m))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+w(t));return this.connections.some((function(e){return e.input===t}))}},{key:"toJSON",value:function(){return{connections:this.connections.map((function(t){return{node:t.input.node.id,input:t.input.key,data:t.data}}))}}}]),e}();function w(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=w(e[0],n);return e.every((function(t){return w(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return w(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+w(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var b=function(){function t(e){if(n(this,t),"string"!=typeof e)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+x(e));this.name=e,this.id=t.incrementId(),this.position=[0,0],this.inputs=new Map,this.outputs=new Map,this.controls=new Map,this.data={},this.meta={}}return r(t,[{key:"addControl",value:function(t){if(!(t instanceof f))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+x(t));return(t.parent=this).controls.set(t.key,t),this}},{key:"removeControl",value:function(t){if(!(t instanceof f))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+x(t));t.parent=null,this.controls.delete(t.key)}},{key:"addInput",value:function(t){if(!(t instanceof m))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+x(t));if(null!==t.node)throw new Error("Input has already been added to the node");return(t.node=this).inputs.set(t.key,t),this}},{key:"removeInput",value:function(t){if(!(t instanceof m))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+x(t));t.removeConnections(),t.node=null,this.inputs.delete(t.key)}},{key:"addOutput",value:function(t){if(!(t instanceof y))throw new TypeError('Value of argument "output" violates contract.\n\nExpected:\nOutput\n\nGot:\n'+x(t));if(null!==t.node)throw new Error("Output has already been added to the node");return(t.node=this).outputs.set(t.key,t),this}},{key:"removeOutput",value:function(t){if(!(t instanceof y))throw new TypeError('Value of argument "output" violates contract.\n\nExpected:\nOutput\n\nGot:\n'+x(t));t.removeConnections(),t.node=null,this.outputs.delete(t.key)}},{key:"getConnections",value:function(){return[].concat(s(this.inputs.values()),s(this.outputs.values())).reduce((function(t,e){return[].concat(s(t),s(e.connections))}),[])}},{key:"toJSON",value:function(){return{id:this.id,data:this.data,inputs:Array.from(this.inputs).reduce((function(t,e){var n=u(e,2),r=n[0],o=n[1];return t[r]=o.toJSON(),t}),{}),outputs:Array.from(this.outputs).reduce((function(t,e){var n=u(e,2),r=n[0],o=n[1];return t[r]=o.toJSON(),t}),{}),position:this.position,name:this.name}}}],[{key:"incrementId",value:function(){return this.latestId?this.latestId++:this.latestId=1,this.latestId}},{key:"fromJSON",value:function(e){if(!(e instanceof Object))throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+x(e));var n=new t(e.name);return n.id=e.id,n.data=e.data,n.position=e.position,n.name=e.name,t.latestId=Math.max(n.id,t.latestId),n}}]),t}();function x(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=x(e[0],n);return e.every((function(t){return x(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return x(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+x(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var k=function(t){function o(t){n(this,o);var e=c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));if(e.constructor===o)throw new TypeError("Can not construct abstract class.");return e.editor=null,e.data={},e}var i,u,s;return a(o,l),r(o,[{key:"builder",value:(s=e(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"created",value:function(){}},{key:"destroyed",value:function(){}},{key:"build",value:(u=e(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof b){t.next=2;break}throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+E(e));case 2:return t.next=4,this.builder(e);case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"createNode",value:(i=e(regeneratorRuntime.mark((function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new b(this.name)).data=n,t.next=4,this.build(e);case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}]),o}();function E(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=E(e[0],n);return e.every((function(t){return E(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return E(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+E(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var O=function t(e){n(this,t),this.handlers=i({warn:[console.warn],error:[console.error]},e)},_=function(){function t(e){if(n(this,t),!(e instanceof O||e instanceof t))throw new TypeError('Value of argument "events" violates contract.\n\nExpected:\nEvents | Emitter\n\nGot:\n'+C(e));this.events=e instanceof t?e.events:e.handlers,this.silent=!1}return r(t,[{key:"on",value:function(t,e){var n=this;if("string"!=typeof t)throw new TypeError('Value of argument "names" violates contract.\n\nExpected:\nstring\n\nGot:\n'+C(t));if("function"!=typeof e)throw new TypeError('Value of argument "handler" violates contract.\n\nExpected:\n() => {}\n\nGot:\n'+C(e));return t.split(" ").forEach((function(t){if(!n.events[t])throw new Error("The event "+t+" does not exist");n.events[t].push(e)})),this}},{key:"trigger",value:function(t,e){if("string"!=typeof t)throw new TypeError('Value of argument "name" violates contract.\n\nExpected:\nstring\n\nGot:\n'+C(t));if(!(t in this.events))throw new Error("The event "+t+" cannot be triggered");return this.events[t].reduce((function(t,n){return!1!==n(e)&&t}),!0)}}]),t}();function C(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=C(e[0],n);return e.every((function(t){return C(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return C(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+C(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var T=function(){function t(){n(this,t)}return r(t,null,[{key:"isValidData",value:function(t){return"string"==typeof t.id&&this.isValidId(t.id)&&t.nodes instanceof Object&&!(t.nodes instanceof Array)}},{key:"isValidId",value:function(t){return/^[\w-]{3,}@[0-9]+\.[0-9]+\.[0-9]+$/.test(t)}},{key:"validate",value:function(t,e){var n="",r=t.split("@"),o=e.id.split("@");return this.isValidData(e)||(n+="Data is not suitable. "),t!==e.id&&(n+="IDs not equal. "),r[0]!==o[0]&&(n+="Names don't match. "),r[1]!==o[1]&&(n+="Versions don't match"),{success:""===n,msg:n}}}]),t}(),A=function(t){function e(t,r){n(this,e);var o=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));if(!T.isValidId(t))throw new Error("ID should be valid to name@0.1.0 format");return o.id=t,o}return a(e,_),r(e,[{key:"use",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.install(this,e)}}]),e}(),j=function(t){function e(){return n(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{componentregister:[]}))}return a(e,O),e}(),N=0,L=1,D=2,$=function(t){function o(t){if(n(this,o),"string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+S(t));var e=c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,new j));return e.components=[],e.args=[],e.data=null,e.state=N,e.onAbort=function(){},e}var i,u,f,h,p,d,v,m,g,y,w;return a(o,A),r(o,[{key:"clone",value:function(){var t=new o(this.id);return this.components.map((function(e){return t.register(e)})),t}},{key:"register",value:function(t){if(!(t instanceof l))throw new TypeError('Value of argument "component" violates contract.\n\nExpected:\nComponent\n\nGot:\n'+S(t));this.components.push(t),this.trigger("componentregister",t)}},{key:"throwError",value:(w=e(regeneratorRuntime.mark((function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.abort();case 2:return this.trigger("error",{message:e,data:n}),this.processDone(),t.abrupt("return","error");case 5:case"end":return t.stop()}}),t,this)}))),function(t){return w.apply(this,arguments)})},{key:"extractInputNodes",value:function(t,e){return Object.keys(t.inputs).reduce((function(n,r){return[].concat(s(n),s((t.inputs[r].connections||[]).reduce((function(t,n){return[].concat(s(t),[e[n.node]])}),[])))}),[])}},{key:"detectRecursions",value:function(t){var e=this;return Object.keys(t).map((function(e){return t[e]})).map((function(n){return function n(r,o){if(o.some((function(t){return t===r})))return r;for(var i=0;i<o.length;i++)if(n(r,e.extractInputNodes(o[i],t)))return r;return null}(n,e.extractInputNodes(n,t))})).filter((function(t){return null!==t}))}},{key:"processStart",value:function(){return this.state===N?(this.state=L,!0):(this.state===D||console.warn("The process is busy and has not been restarted.\n                Use abort() to force it to complete"),!1)}},{key:"processDone",value:function(){var t=this.state!==D;return this.state=N,t||(this.onAbort(),this.onAbort=function(){}),t}},{key:"abort",value:(y=e(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.state===L?(e.state=D,e.onAbort=t):e.state===D?(e.onAbort(),e.onAbort=t):t()})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"lock",value:(g=e(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.unlockPool=e.unlockPool||[],e.busy&&!e.outputData?e.unlockPool.push(t):t(),e.busy=!0})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"unlock",value:function(t){t.unlockPool.forEach((function(t){return t()})),t.unlockPool=[],t.busy=!1}},{key:"extractInputData",value:(m=e(regeneratorRuntime.mark((function t(n){var r,o,i,a,c,u,s,l,f,h,p,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},(s=Object.keys(n.inputs))&&("function"==typeof s[Symbol.iterator]||Array.isArray(s))){t.next=4;break}throw new TypeError("Expected _Object$keys to be iterable, got "+S(s));case 4:o=!0,i=!1,a=void 0,t.prev=7,c=s[Symbol.iterator]();case 9:if(o=(u=c.next()).done){t.next=20;break}return l=u.value,f=n.inputs[l],h=f.connections,t.next=15,Promise.all(h.map(function(){var t=e(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.data.nodes[e.node],t.next=3,d.processNode(n);case 3:if(r=t.sent){t.next=8;break}d.abort(),t.next=9;break;case 8:return t.abrupt("return",r[e.output]);case 9:case"end":return t.stop()}}),t,d)})));return function(e){return t.apply(this,arguments)}}()));case 15:p=t.sent,r[l]=p;case 17:o=!0,t.next=9;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(7),i=!0,a=t.t0;case 26:t.prev=26,t.prev=27,!o&&c.return&&c.return();case 29:if(t.prev=29,!i){t.next=32;break}throw a;case 32:return t.finish(29);case 33:return t.finish(26);case 34:return t.abrupt("return",r);case 35:case"end":return t.stop()}}),t,this,[[7,22,26,34],[27,,29,33]])}))),function(t){return m.apply(this,arguments)})},{key:"processWorker",value:(v=e(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.extractInputData(e);case 2:return n=t.sent,r=this.components.find((function(t){return t.name===e.name})),o={},t.prev=5,t.next=8,r.worker.apply(r,[e,n,o].concat(s(this.args)));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),this.abort(),this.trigger("warn",t.t0);case 14:return t.abrupt("return",o);case 15:case"end":return t.stop()}}),t,this,[[5,10]])}))),function(t){return v.apply(this,arguments)})},{key:"processNode",value:(d=e(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state!==D&&e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.lock(e);case 4:return e.outputData||(e.outputData=this.processWorker(e)),this.unlock(e),t.abrupt("return",e.outputData);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"forwardProcess",value:(p=e(regeneratorRuntime.mark((function t(n){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state!==D){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,Promise.all(Object.keys(n.outputs).map(function(){var t=e(regeneratorRuntime.mark((function t(o){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.outputs[o],t.next=3,Promise.all(i.connections.map(function(){var t=e(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.data.nodes[e.node],t.next=3,r.processNode(n);case 3:return t.next=5,r.forwardProcess(n);case 5:case"end":return t.stop()}}),t,r)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,r)})));return function(e){return t.apply(this,arguments)}}()));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"copy",value:function(t){return(t=Object.assign({},t)).nodes=Object.assign({},t.nodes),Object.keys(t.nodes).forEach((function(e){t.nodes[e]=Object.assign({},t.nodes[e])})),t}},{key:"validate",value:(h=e(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=T.validate(this.id,e)).success){t.next=5;break}return t.next=4,this.throwError(n.msg);case 4:case 9:return t.abrupt("return",t.sent);case 5:if(!(0<(r=this.detectRecursions(e.nodes)).length)){t.next=10;break}return t.next=9,this.throwError("Recursion detected",r);case 10:return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"processStartNode",value:(f=e(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=10;break}if(n=this.data.nodes[e]){t.next=6;break}return t.next=5,this.throwError("Node with such id not found");case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,this.processNode(n);case 8:return t.next=10,this.forwardProcess(n);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"processUnreachable",value:(u=e(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(this.data.nodes);case 1:if((t.t1=t.t0()).done){t.next=11;break}if(e=t.t1.value,void 0!==this.data.nodes[e].outputData){t.next=9;break}return n=this.data.nodes[e],t.next=7,this.processNode(n);case 7:return t.next=9,this.forwardProcess(n);case 9:t.next=1;break;case 11:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"process",value:(i=e(regeneratorRuntime.mark((function t(e){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length,o=Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e instanceof Object){t.next=2;break}throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nObject\n\nGot:\n'+S(e));case 2:if(null==n||"number"==typeof n){t.next=4;break}throw new TypeError('Value of argument "startId" violates contract.\n\nExpected:\n?number\n\nGot:\n'+S(n));case 4:if(this.processStart()){t.next=6;break}return t.abrupt("return");case 6:if(this.validate(e)){t.next=8;break}return t.abrupt("return");case 8:return this.data=this.copy(e),this.args=o,t.next=12,this.processStartNode(n);case 12:return t.next=14,this.processUnreachable();case 14:return t.abrupt("return",this.processDone()?"success":"aborted");case 15:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})}]),o}();function S(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=S(e[0],n);return e.every((function(t){return S(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return S(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+S(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var B=function(t){function e(){return n(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{nodecreate:[],nodecreated:[],noderemove:[],noderemoved:[],connectioncreate:[],connectioncreated:[],connectionremove:[],connectionremoved:[],nodetranslate:[],nodetranslated:[],selectnode:[],nodeselect:[],nodeselected:[],rendernode:[],rendersocket:[],rendercontrol:[],renderconnection:[],componentregister:[],keydown:[],keyup:[],translate:[],translated:[],zoom:[],zoomed:[],click:[],mousemove:[],contextmenu:[],import:[],export:[],process:[]}))}return a(e,O),e}(),I=function(){function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};n(this,t),this.mouseStart=null,this.el=e,this.onTranslate=r,this.onStart=o,this.onDrag=i,this.initEvents(e)}return r(t,[{key:"initEvents",value:function(t){t.addEventListener("mousedown",this.down.bind(this)),window.addEventListener("mousemove",this.move.bind(this)),window.addEventListener("mouseup",this.up.bind(this)),t.addEventListener("touchstart",this.down.bind(this)),window.addEventListener("touchmove",this.move.bind(this),{passive:!1}),window.addEventListener("touchend",this.up.bind(this))}},{key:"getCoords",value:function(t){var e=t.touches?t.touches[0]:t;return[e.pageX,e.pageY]}},{key:"down",value:function(t){t.stopPropagation(),this.mouseStart=this.getCoords(t),this.onStart(t)}},{key:"move",value:function(t){if(this.mouseStart){t.preventDefault(),t.stopPropagation();var e=this.getCoords(t),n=u(e,2),r=n[0],o=n[1],i=[r-this.mouseStart[0],o-this.mouseStart[1]],a=this.el.getBoundingClientRect().width/this.el.offsetWidth;this.onTranslate(i[0]/a,i[1]/a,t)}}},{key:"up",value:function(t){this.mouseStart&&(this.mouseStart=null,this.onDrag(t))}}]),t}(),V=function(){function t(e,r,o,i){n(this,t),this.el=r,this.intensity=o,this.onzoom=i,this.distance=null,e.addEventListener("wheel",this.wheel.bind(this)),e.addEventListener("touchmove",this.move.bind(this)),e.addEventListener("touchend",this.end.bind(this)),e.addEventListener("touchcancel",this.end.bind(this))}return r(t,[{key:"wheel",value:function(t){t.preventDefault();var e=this.el.getBoundingClientRect(),n=(t.wheelDelta?t.wheelDelta/120:-t.deltaY/3)*this.intensity,r=(e.left-t.clientX)*n,o=(e.top-t.clientY)*n;this.onzoom(n,r,o)}},{key:"touches",value:function(t){var e=[t.touches[0].clientX,t.touches[0].clientY],n=e[0],r=e[1],o=[t.touches[1].clientX,t.touches[1].clientY],i=o[0],a=o[1];return{cx:(n+i)/2,cy:(r+a)/2,distance:Math.sqrt(Math.pow(n-i,2)+Math.pow(r-a,2))}}},{key:"move",value:function(t){if(!(t.touches.length<2)){var e=this.el.getBoundingClientRect(),n=this.touches(t),r=n.cx,o=n.cy,i=n.distance;if(null!==this.distance){var a=i/this.distance-1,c=(e.left-r)*a,u=(e.top-o)*a;this.onzoom(a,c,u)}this.distance=i}}},{key:"end",value:function(){this.distance=null}}]),t}(),M=function(e){function o(e,r){if(n(this,o),!(r instanceof _))throw new TypeError('Value of argument "emitter" violates contract.\n\nExpected:\nEmitter\n\nGot:\n'+function e(n,r){if(void 0===r&&(r=0),r+=1,null===n)return"null";if(void 0===n)return"void";if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)return void 0===n?"undefined":t(n);if(Array.isArray(n)){if(0<n.length){if(4<r)return"[...]";var o=e(n[0],r);return n.every((function(t){return e(t,r)===o}))?o.trim()+"[]":"["+n.slice(0,15).map((function(t){return e(t,r)})).join(", ")+(15<=n.length?", ...":"")+"]"}return"Array"}var i=Object.keys(n);if(!i.length)return n.constructor&&n.constructor.name&&"Object"!==n.constructor.name?n.constructor.name:"Object";if(4<r)return"{...}";var a="  ".repeat(r-1),c=i.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+e(n[t],r)+";"})).join("\n  "+a);return 15<=i.length&&(c+="\n  "+a+"..."),n.constructor&&n.constructor.name&&"Object"!==n.constructor.name?n.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}(r));var i=c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,r)),a=i.el=document.createElement("div");return i.container=e,i.transform={k:1,x:0,y:0},i.mouse={x:0,y:0},a.style.transformOrigin="0 0",i._startPosition=null,i._zoom=new V(e,a,.1,i.onZoom.bind(i)),i._drag=new I(e,i.onTranslate.bind(i),i.onStart.bind(i)),i.container.addEventListener("mousemove",i.mousemove.bind(i)),i.update(),i}return a(o,_),r(o,[{key:"update",value:function(){var t=this.transform;this.el.style.transform="translate("+t.x+"px, "+t.y+"px) scale("+t.k+")"}},{key:"mousemove",value:function(t){var e=this.el.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,o=this.transform.k;this.mouse={x:n/o,y:r/o},this.trigger("mousemove",i({},this.mouse))}},{key:"onStart",value:function(){this._startPosition=i({},this.transform)}},{key:"onTranslate",value:function(t,e){this.translate(this._startPosition.x+t,this._startPosition.y+e)}},{key:"onZoom",value:function(t,e,n){this.zoom(this.transform.k*(1+t),e,n),this.update()}},{key:"translate",value:function(t,e){var n={transform:this.transform,x:t,y:e};this.trigger("translate",n)&&(this.transform.x=n.x,this.transform.y=n.y,this.update(),this.trigger("translated"))}},{key:"zoom",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this.transform.k,o={transform:this.transform,zoom:t};if(this.trigger("zoom",o)){var i=(r-o.zoom)/(r-t||1);this.transform.k=o.zoom||1,this.transform.x+=e*i,this.transform.y+=n*i,this.update(),this.trigger("zoomed")}}},{key:"appendChild",value:function(t){this.el.appendChild(t)}},{key:"removeChild",value:function(t){this.el.removeChild(t)}}]),o}(),G=function(t){function e(t,r,o){n(this,e);var i=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return i.trigger("rendercontrol",{el:t,control:r}),i}return a(e,_),e}(),P=function(t){function e(t,r,i,a,u){var s;n(this,e);var l=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u));return l.el=t,l.type=r,l.io=i,l.node=a,l.trigger("rendersocket",(o(s={el:t},r,l.io),o(s,"socket",i.socket),s)),l}return a(e,_),r(e,[{key:"getPosition",value:function(t){var e=t.position,n=this.el;return[e[0]+n.offsetLeft+n.offsetWidth/2,e[1]+n.offsetTop+n.offsetHeight/2]}}]),e}(),R=function(t){function e(t,r,o){n(this,e);var i=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return i.node=t,i.component=r,i.sockets=new Map,i.controls=new Map,i.el=document.createElement("div"),i.el.style.position="absolute",i.el.addEventListener("contextmenu",(function(t){return i.trigger("contextmenu",{e:t,node:i.node})})),i._startPosition=null,i._drag=new I(i.el,i.onTranslate.bind(i),i.onSelect.bind(i)),i.trigger("rendernode",{el:i.el,node:t,component:r.data,bindSocket:i.bindSocket.bind(i),bindControl:i.bindControl.bind(i)}),i.update(),i}return a(e,_),r(e,[{key:"bindSocket",value:function(t,e,n){if(!(t instanceof HTMLElement))throw new TypeError('Value of argument "el" violates contract.\n\nExpected:\nHTMLElement\n\nGot:\n'+F(t));if("string"!=typeof e)throw new TypeError('Value of argument "type" violates contract.\n\nExpected:\nstring\n\nGot:\n'+F(e));if(!(n instanceof p))throw new TypeError('Value of argument "io" violates contract.\n\nExpected:\nIO\n\nGot:\n'+F(n));this.sockets.set(n,new P(t,e,n,this.node,this))}},{key:"bindControl",value:function(t,e){if(!(t instanceof HTMLElement))throw new TypeError('Value of argument "el" violates contract.\n\nExpected:\nHTMLElement\n\nGot:\n'+F(t));if(!(e instanceof f))throw new TypeError('Value of argument "control" violates contract.\n\nExpected:\nControl\n\nGot:\n'+F(e));this.controls.set(e,new G(t,e,this))}},{key:"getSocketPosition",value:function(t){return this.sockets.get(t).getPosition(this.node)}},{key:"onSelect",value:function(t){this._startPosition=[].concat(s(this.node.position)),this.trigger("selectnode",{node:this.node,accumulate:t.ctrlKey})}},{key:"onTranslate",value:function(t,e){var n=this._startPosition[0]+t,r=this._startPosition[1]+e;this.translate(n,r)}},{key:"translate",value:function(t,e){var n=this.node,r={node:n,x:t,y:e};if(this.trigger("nodetranslate",r)){var o=[].concat(s(n.position));n.position[0]=r.x,n.position[1]=r.y,this.update(),this.trigger("nodetranslated",{node:n,prev:o})}}},{key:"update",value:function(){this.el.style.transform="translate("+this.node.position[0]+"px, "+this.node.position[1]+"px)"}},{key:"remove",value:function(){}}]),e}();function F(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=F(e[0],n);return e.every((function(t){return F(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return F(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+F(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var H=function(t){function e(t,r,o,i){if(n(this,e),!(r instanceof R))throw new TypeError('Value of argument "inputNode" violates contract.\n\nExpected:\nViewNode\n\nGot:\n'+z(r));if(!(o instanceof R))throw new TypeError('Value of argument "outputNode" violates contract.\n\nExpected:\nViewNode\n\nGot:\n'+z(o));var a=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return a.connection=t,a.inputNode=r,a.outputNode=o,a.el=document.createElement("div"),a.el.style.position="absolute",a.el.style.zIndex="-1",a.update(),a}return a(e,_),r(e,[{key:"update",value:function(){var t=this.outputNode.getSocketPosition(this.connection.output),e=u(t,2),n=e[0],r=e[1],o=this.inputNode.getSocketPosition(this.connection.input),i=u(o,2),a=i[0],c=i[1];this.trigger("renderconnection",{el:this.el,connection:this.connection,x1:n,y1:r,x2:a,y2:c})}}]),e}();function z(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=z(e[0],n);return e.every((function(t){return z(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return z(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+z(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var J=function(t){function e(t,r,o){if(n(this,e),!(t instanceof HTMLElement))throw new TypeError('Value of argument "container" violates contract.\n\nExpected:\nHTMLElement\n\nGot:\n'+K(t));if(!(r instanceof Object))throw new TypeError('Value of argument "components" violates contract.\n\nExpected:\nObject\n\nGot:\n'+K(r));if(!(o instanceof _))throw new TypeError('Value of argument "emitter" violates contract.\n\nExpected:\nEmitter\n\nGot:\n'+K(o));var i=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return i.container=t,i.components=r,i.container.style.overflow="hidden",i.nodes=new Map,i.connections=new Map,i.container.addEventListener("click",i.click.bind(i)),i.container.addEventListener("contextmenu",(function(t){return i.trigger("contextmenu",{e:t,view:i})})),window.addEventListener("resize",i.resize.bind(i)),i.on("nodetranslated",i.updateConnections.bind(i)),i.area=new M(t,i),i.container.appendChild(i.area.el),i}return a(e,_),r(e,[{key:"addNode",value:function(t){if(!(t instanceof b))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+K(t));var e=new R(t,this.components.get(t.name),this);this.nodes.set(t,e),this.area.appendChild(e.el)}},{key:"removeNode",value:function(t){if(!(t instanceof b))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+K(t));var e=this.nodes.get(t);this.nodes.delete(t),this.area.removeChild(e.el)}},{key:"addConnection",value:function(t){if(!(t instanceof h))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+K(t));var e=this.nodes.get(t.input.node),n=this.nodes.get(t.output.node),r=new H(t,e,n,this);this.connections.set(t,r),this.area.appendChild(r.el)}},{key:"removeConnection",value:function(t){if(!(t instanceof h))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+K(t));var e=this.connections.get(t);this.connections.delete(t),this.area.removeChild(e.el)}},{key:"updateConnections",value:function(t){var e=this;t.node.getConnections().map((function(t){e.connections.get(t).update()}))}},{key:"resize",value:function(){var t=this.container,e=t.parentElement.clientWidth,n=t.parentElement.clientHeight;t.style.width=e+"px",t.style.height=n+"px"}},{key:"click",value:function(t){var e=this.container;e===t.target&&this.trigger("click",{e:t,container:e})}}]),e}();function K(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=K(e[0],n);return e.every((function(t){return K(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return K(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+K(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}var Z=function(){function e(){n(this,e),this.list=[]}return r(e,[{key:"add",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof b))throw new TypeError('Value of argument "item" violates contract.\n\nExpected:\nNode\n\nGot:\n'+function e(n,r){if(void 0===r&&(r=0),r+=1,null===n)return"null";if(void 0===n)return"void";if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)return void 0===n?"undefined":t(n);if(Array.isArray(n)){if(0<n.length){if(4<r)return"[...]";var o=e(n[0],r);return n.every((function(t){return e(t,r)===o}))?o.trim()+"[]":"["+n.slice(0,15).map((function(t){return e(t,r)})).join(", ")+(15<=n.length?", ...":"")+"]"}return"Array"}var i=Object.keys(n);if(!i.length)return n.constructor&&n.constructor.name&&"Object"!==n.constructor.name?n.constructor.name:"Object";if(4<r)return"{...}";var a="  ".repeat(r-1),c=i.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+e(n[t],r)+";"})).join("\n  "+a);return 15<=i.length&&(c+="\n  "+a+"..."),n.constructor&&n.constructor.name&&"Object"!==n.constructor.name?n.constructor.name+" {\n  "+a+c+"\n"+a+"}":"{\n  "+a+c+"\n"+a+"}"}(e));n?this.contains(e)?this.remove(e):this.list.push(e):this.list=[e]}},{key:"clear",value:function(){var t=this;this.each((function(e){t.remove(e)}))}},{key:"remove",value:function(t){this.list.splice(this.list.indexOf(t),1)}},{key:"contains",value:function(t){return-1!==this.list.indexOf(t)}},{key:"each",value:function(t){this.list.forEach(t)}}]),e}(),U=function(t){function o(t,e){if(n(this,o),"string"!=typeof t)throw new TypeError('Value of argument "id" violates contract.\n\nExpected:\nstring\n\nGot:\n'+W(t));if(!(e instanceof HTMLElement))throw new TypeError('Value of argument "container" violates contract.\n\nExpected:\nHTMLElement\n\nGot:\n'+W(e));var r=c(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t,new B));return r.nodes=[],r.components=new Map,r.selected=new Z,r.view=new J(e,r.components,r),window.addEventListener("keydown",(function(t){return r.trigger("keydown",t)})),window.addEventListener("keyup",(function(t){return r.trigger("keyup",t)})),r.on("nodecreated",(function(t){return r.getComponent(t.name).created(t)})),r.on("noderemoved",(function(t){return r.getComponent(t.name).destroyed(t)})),r.on("selectnode",(function(t){var e=t.node,n=t.accumulate;return r.selectNode(e,n)})),r}var i;return a(o,A),r(o,[{key:"addNode",value:function(t){if(!(t instanceof b))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+W(t));this.trigger("nodecreate",t)&&(this.nodes.push(t),this.view.addNode(t),this.trigger("nodecreated",t))}},{key:"removeNode",value:function(t){var e=this;if(!(t instanceof b))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+W(t));this.trigger("noderemove",t)&&(t.getConnections().forEach((function(t){return e.removeConnection(t)})),this.nodes.splice(this.nodes.indexOf(t),1),this.view.removeNode(t),this.trigger("noderemoved",t))}},{key:"connect",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!(t instanceof y))throw new TypeError('Value of argument "output" violates contract.\n\nExpected:\nOutput\n\nGot:\n'+W(t));if(!(e instanceof m))throw new TypeError('Value of argument "input" violates contract.\n\nExpected:\nInput\n\nGot:\n'+W(e));if(this.trigger("connectioncreate",{output:t,input:e}))try{var r=t.connectTo(e);r.data=n,this.view.addConnection(r),this.trigger("connectioncreated",r)}catch(t){this.trigger("warn",t)}}},{key:"removeConnection",value:function(t){if(!(t instanceof h))throw new TypeError('Value of argument "connection" violates contract.\n\nExpected:\nConnection\n\nGot:\n'+W(t));this.trigger("connectionremove",t)&&(this.view.removeConnection(t),t.remove(),this.trigger("connectionremoved",t))}},{key:"selectNode",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof b))throw new TypeError('Value of argument "node" violates contract.\n\nExpected:\nNode\n\nGot:\n'+W(t));if("boolean"!=typeof e)throw new TypeError('Value of argument "accumulate" violates contract.\n\nExpected:\nboolean\n\nGot:\n'+W(e));if(-1===this.nodes.indexOf(t))throw new Error("Node not exist in list");this.trigger("nodeselect",t)&&(this.selected.add(t,e),this.trigger("nodeselected",t))}},{key:"getComponent",value:function(t){var e=this.components.get(t);if(!e)throw"Component "+t+" not found";return e}},{key:"register",value:function(t){if(!(t instanceof k))throw new TypeError('Value of argument "component" violates contract.\n\nExpected:\nComponent\n\nGot:\n'+W(t));(t.editor=this).components.set(t.name,t),this.trigger("componentregister",t)}},{key:"clear",value:function(){var t=this;[].concat(s(this.nodes)).map((function(e){return t.removeNode(e)}))}},{key:"toJSON",value:function(){var t={id:this.id,nodes:{}};return this.nodes.forEach((function(e){return t.nodes[e.id]=e.toJSON()})),this.trigger("export",t),t}},{key:"beforeImport",value:function(t){if(!(t instanceof Object))throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+W(t));var e=T.validate(this.id,t);return e.success?(this.silent=!0,this.clear(),this.trigger("import",t),!0):(this.trigger("warn",e.msg),!1)}},{key:"afterImport",value:function(){return this.silent=!1,!0}},{key:"fromJSON",value:(i=e(regeneratorRuntime.mark((function t(n){var r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n instanceof Object){t.next=2;break}throw new TypeError('Value of argument "json" violates contract.\n\nExpected:\nObject\n\nGot:\n'+W(n));case 2:if(this.beforeImport(n)){t.next=4;break}return t.abrupt("return",!1);case 4:return r={},t.prev=5,t.next=8,Promise.all(Object.keys(n.nodes).map(function(){var t=e(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.nodes[e],a=o.getComponent(i.name),t.next=4,a.build(b.fromJSON(i));case 4:r[e]=t.sent,o.addNode(r[e]);case 6:case"end":return t.stop()}}),t,o)})));return function(e){return t.apply(this,arguments)}}()));case 8:Object.keys(n.nodes).forEach((function(t){var e=n.nodes[t],i=r[t];Object.keys(e.outputs).forEach((function(t){e.outputs[t].connections.forEach((function(e){var n=e.node,a=e.data,c=i.outputs.get(t),u=r[n].inputs.get(e.input);o.connect(c,u,a)}))}))})),t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(5),this.trigger("warn",t.t0),t.abrupt("return",!this.afterImport());case 15:return t.prev=15,t.abrupt("return",this.afterImport());case 18:case"end":return t.stop()}}),t,this,[[5,11,15,18]])}))),function(t){return i.apply(this,arguments)})}]),o}();function W(e,n){if(void 0===n&&(n=0),n+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return void 0===e?"undefined":t(e);if(Array.isArray(e)){if(0<e.length){if(4<n)return"[...]";var r=W(e[0],n);return e.every((function(t){return W(t,n)===r}))?r.trim()+"[]":"["+e.slice(0,15).map((function(t){return W(t,n)})).join(", ")+(15<=e.length?", ...":"")+"]"}return"Array"}var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(4<n)return"{...}";var i="  ".repeat(n-1),a=o.slice(0,15).map((function(t){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(t)?t:JSON.stringify(t))+": "+W(e[t],n)+";"})).join("\n  "+i);return 15<=o.length&&(a+="\n  "+i+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+i+a+"\n"+i+"}":"{\n  "+i+a+"\n"+i+"}"}return{Component:k,Control:f,NodeEditor:U,Emitter:_,Engine:$,Input:m,Node:b,Output:y,Socket:d}}();var a={};
/*!
* rete-alight-render-plugin v0.1.5 
* (c) 2018  License 
* Released under the ISC license.
*/!function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",s=t.regeneratorRuntime;if(s)a=s;else{(s=t.regeneratorRuntime=a).wrap=w;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={},v={};v[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(N([])));g&&g!==n&&r.call(g,i)&&(v=g);var y=E.prototype=x.prototype=Object.create(v);k.prototype=y.constructor=E,E.constructor=k,E[u]=k.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(y),t},s.awrap=function(t){return{__await:t}},O(_.prototype),_.prototype[c]=function(){return this},s.AsyncIterator=_,s.async=function(t,e,n,r){var o=new _(w(t,e,n,r));return s.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(y),y[u]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=N,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}}}function w(t,e,n,r){var o,i,a,c,u=e&&e.prototype instanceof x?e:x,s=Object.create(u.prototype),v=new j(r||[]);return s._invoke=(o=t,i=n,a=v,c=l,function(t,e){if(c===h)throw new Error("Generator is already running");if(c===p){if("throw"===t)throw e;return L()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=C(n,a);if(r){if(r===d)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===l)throw c=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=h;var u=b(o,i,a);if("normal"===u.type){if(c=a.done?p:f,u.arg===d)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=p,a.method="throw",a.arg=u.arg)}}),s}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function E(){}function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,a){var c=b(t[n],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?Promise.resolve(s.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(s).then((function(t){u.value=t,i(u)}),a)}a(c.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=b(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}}(function(){return this}()||Function("return this")()),a=function(t){function e(t){return t.toLowerCase().replace(/ /g,"-")}return function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e)}}(".node {\n  background: rgba(110, 136, 255, 0.8);\n  border: 2px solid #4e58bf;\n  border-radius: 10px;\n  cursor: pointer;\n  min-width: 180px;\n  height: auto;\n  padding-bottom: 6px;\n  box-sizing: content-box;\n  position: relative;\n  user-select: none; }\n  .node:hover {\n    background: rgba(130, 153, 255, 0.8); }\n  .node.selected {\n    background: #ffd92c;\n    border-color: #e3c000; }\n  .node .title {\n    color: white;\n    font-family: sans-serif;\n    font-size: 18px;\n    padding: 8px; }\n  .node .socket {\n    display: inline-block;\n    cursor: pointer;\n    border: 1px solid white;\n    border-radius: 12px;\n    width: 24px;\n    height: 24px;\n    margin: 6px;\n    vertical-align: middle;\n    background: #96b38a;\n    z-index: 2;\n    box-sizing: border-box; }\n    .node .socket:hover {\n      border-width: 4px; }\n    .node .socket.multiple {\n      border-color: yellow; }\n    .node .socket.output {\n      margin-right: -12px; }\n    .node .socket.input {\n      margin-left: -12px; }\n  .node .input-title, .node .output-title {\n    vertical-align: middle;\n    color: white;\n    display: inline-block;\n    font-family: sans-serif;\n    font-size: 14px;\n    margin: 6px;\n    line-height: 24px; }\n  .node .input-control {\n    z-index: 1;\n    width: calc(100% - 36px);\n    vertical-align: middle;\n    display: inline-block; }\n  .node .control {\n    padding: 6px 18px; }\n  .node select, .node input {\n    width: 100%;\n    border-radius: 30px;\n    background-color: white;\n    padding: 2px 6px;\n    border: 1px solid #999;\n    font-size: 110%;\n    width: 170px; }\n"),{install:function(n,r){var o=t.makeInstance(),i=t.makeInstance();function a(t){return n.selected.contains(t)}o.directives.al.socket=function(t,e,n,r){var o=r.changeDetector.locals,i=n;t.bindSocket(e,i,o[i])},o.directives.al.control=function(t,e,n,r){var o=r.changeDetector.locals,i=o.input?o.input.control:o.control;t.bindControl(e,i)},n.on("rendernode",(function(t){var n=t.el,i=t.node,c=t.component,u=t.bindSocket,s=t.bindControl;c.render&&"alight"!==c.render||(n.innerHTML=c.template||r.template||function(t){var e="";try{var n={};e+="<div class=\"node {{isSelected(node)?'selected':''}} {{toClassName(node.name)}}\">",e+='<div class="title">',e+="{{node.name}}</div>",e+="\x3c!-- Outputs--\x3e",e+='<div al-repeat="output in Array.from(node.outputs.values())" style="text-align: right">',e+='<div class="output-title">',e+="{{output.name}}</div>",e+='<div class="socket output {{toClassName(output.socket.name)}}" al-socket="output" title="{{output.socket.name}}\n{{output.socket.hint}}"></div></div>',e+="\x3c!-- Controls--\x3e",e+='<div class="control" al-repeat="control in Array.from(node.controls.values())" al-control></div>',e+="\x3c!-- Inputs--\x3e",e+='<div al-repeat="input in Array.from(node.inputs.values())" style="text-align: left">',e+='<div class="socket input {{toClassName(input.socket.name)}} {{input.multipleConnections?\'multiple\':\'\'}}" al-socket="input" title="{{input.socket.name}}"></div>',e+='<div class="input-title" al-if="!input.showControl()">',e+="{{input.name}}</div>",e+='<div class="input-control" al-if="input.showControl()" al-control></div></div></div>'}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}(),i._alight=o.bootstrap(n,{node:i,isSelected:a,bindSocket:u,bindControl:s,toClassName:e,Array:Array}))})),n.on("rendercontrol",(function(t){var e=t.el,n=t.control;if(!n.render||"alight"===n.render){var r=document.createElement("div"),o=n.template||"",a=n.scope||{},c=n.mounted||function(){};e.appendChild(r),r.innerHTML=o,n.render="alight",n._alight=i.bootstrap(r,a),c.call(n)}})),n.on("connectioncreated connectionremoved",(function(t){t.input.node._alight.scan()})),n.on("nodeselected",(function(t){n.nodes.map((function(t){return t._alight.scan()})),t._alight.scan()}))}}}(o("8IF5N"));var c={};
/*!
* rete-connection-plugin v0.1.2 
* (c) 2018  License 
* Released under the ISC license.
*/!function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",s=t.regeneratorRuntime;if(s)c=s;else{(s=t.regeneratorRuntime=c).wrap=w;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={},v={};v[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(N([])));g&&g!==n&&r.call(g,i)&&(v=g);var y=E.prototype=x.prototype=Object.create(v);k.prototype=y.constructor=E,E.constructor=k,E[u]=k.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(y),t},s.awrap=function(t){return{__await:t}},O(_.prototype),_.prototype[a]=function(){return this},s.AsyncIterator=_,s.async=function(t,e,n,r){var o=new _(w(t,e,n,r));return s.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(y),y[u]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=N,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}}}function w(t,e,n,r){var o,i,a,c,u=e&&e.prototype instanceof x?e:x,s=Object.create(u.prototype),v=new j(r||[]);return s._invoke=(o=t,i=n,a=v,c=l,function(t,e){if(c===h)throw new Error("Generator is already running");if(c===p){if("throw"===t)throw e;return L()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=C(n,a);if(r){if(r===d)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===l)throw c=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=h;var u=b(o,i,a);if("normal"===u.type){if(c=a.done?p:f,u.arg===d)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=p,a.method="throw",a.arg=u.arg)}}),s}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function E(){}function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,a){var c=b(t[n],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?Promise.resolve(s.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(s).then((function(t){u.value=t,i(u)}),a)}a(c.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=b(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}}(function(){return this}()||Function("return this")()),c=function(){function t(t){return t.toLowerCase().replace(/ /g,"-")}function e(e,n){var r=e.el,o=e.x1,i=e.y1,a=e.x2,c=e.y2,u=e.connection,s=o+Math.abs(a-o)*n,l=a-Math.abs(a-o)*n,f=u?["input-"+t(u.input.name),"output-"+t(u.output.name),"socket-input-"+t(u.input.socket.name),"socket-output-"+t(u.output.socket.name)]:[];r.innerHTML='<svg class="connection '+f.join(" ")+'">\n        <path d="M '+o+" "+i+" C "+s+" "+i+" "+l+" "+c+" "+a+" "+c+'"/>\n    </svg>'}!function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e)}}(".connection {\n  overflow: visible !important;\n  pointer-events: none; }\n  .connection path {\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue; }\n");var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=document.createElement("div"),this.editor=e,this._output=null}return n(t,[{key:"renderConnection",value:function(t,n){var o=t.x,i=t.y;if(this.output){var a=this.editor.view.nodes.get(this.output.node).getSocketPosition(this.output),c=r(a,2),u=c[0],s=c[1];e({el:this.el,x1:u,y1:s,x2:o,y2:i,connection:null},n)}}},{key:"output",get:function(){return this._output},set:function(t){var e=this.editor.view.area;null!==(this._output=t)?e.appendChild(this.el):this.el.parentElement&&(e.removeChild(this.el),this.el.innerHTML="")}}]),t}();return{install:function(t,n){var r=n.curvature,i=void 0===r?.4:r,a=[0,0],c=new o(t);t.on("rendersocket",(function(e){var n=e.el,r=e.input,o=e.output,u=e.socket,s=!1;function l(e){var n,l;s||(e.stopPropagation(),e.preventDefault(),r?function(e){var n=e.input;if(e.node,null===c.output)return n.hasConnection()&&(c.output=n.connections[0].output,t.removeConnection(n.connections[0]),c.renderConnection(a,i));if(!n.multipleConnections&&n.hasConnection()&&t.removeConnection(n.connections[0]),!c.output.multipleConnections&&c.output.hasConnection()&&t.removeConnection(c.output.connections[0]),c.output.connectedTo(n)){var r=n.connections.find((function(t){return t.output===c.output}));t.removeConnection(r)}t.connect(c.output,n),c.output=null}({input:r,socket:u}):o&&(l=(n={output:o,socket:u}).output,n.node,l&&(c.output=l)))}n.addEventListener("mousedown",(function(t){return l(t),s=!0})),n.addEventListener("mouseup",l),n.addEventListener("click",(function(t){return l(t),s=!1})),n.addEventListener("mousemove",(function(){return s=!1}))})),t.on("mousemove",(function(t){a=t,c.renderConnection(a,i)})),t.on("click",(function(){c.output=null})),t.on("renderconnection",(function(t){return e(t,i)}))}}}();var u={};
/*!
* rete-context-menu-plugin v0.1.4 
* (c) 2018  License 
* Released under the ISC license.
*/!function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",s=t.regeneratorRuntime;if(s)u=s;else{(s=t.regeneratorRuntime=u).wrap=w;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={},v={};v[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(N([])));g&&g!==n&&r.call(g,i)&&(v=g);var y=E.prototype=x.prototype=Object.create(v);k.prototype=y.constructor=E,E.constructor=k,E[c]=k.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(y),t},s.awrap=function(t){return{__await:t}},O(_.prototype),_.prototype[a]=function(){return this},s.AsyncIterator=_,s.async=function(t,e,n,r){var o=new _(w(t,e,n,r));return s.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(y),y[c]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=N,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;0<=i;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}}}function w(t,e,n,r){var o,i,a,c,u=e&&e.prototype instanceof x?e:x,s=Object.create(u.prototype),v=new j(r||[]);return s._invoke=(o=t,i=n,a=v,c=l,function(t,e){if(c===h)throw new Error("Generator is already running");if(c===p){if("throw"===t)throw e;return L()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=C(n,a);if(r){if(r===d)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(c===l)throw c=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c=h;var u=b(o,i,a);if("normal"===u.type){if(c=a.done?p:f,u.arg===d)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(c=p,a.method="throw",a.arg=u.arg)}}),s}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function E(){}function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var e;this._invoke=function(n,o){function i(){return new Promise((function(e,i){!function e(n,o,i,a){var c=b(t[n],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&r.call(s,"__await")?Promise.resolve(s.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(s).then((function(t){u.value=t,i(u)}),a)}a(c.arg)}(n,o,e,i)}))}return e=e?e.then(i,i):i()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=b(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}}(function(){return this}()||Function("return this")()),u=function(t){!function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e)}}("@charset \"UTF-8\";\n.context-menu {\n  left: 0;\n  top: 0;\n  position: fixed;\n  padding: 10px;\n  margin-top: -20px; }\n  .context-menu > .item {\n    margin-left: -80%;\n    padding-right: 16px; }\n    .context-menu > .item .subitems {\n      position: absolute;\n      display: none;\n      left: 100%;\n      top: 0;\n      border-radius: 5px;\n      overflow: overlay; }\n    .context-menu > .item:hover .subitems {\n      display: block; }\n    .context-menu > .item.have-subitems:after {\n      content: '';\n      position: absolute;\n      opacity: 0.6;\n      right: 5px;\n      top: 5px; }\n  .context-menu .search input {\n    color: white;\n    padding: 1px 8px;\n    border: 1px solid white;\n    border-radius: 10px;\n    font-size: 16px;\n    font-family: serif;\n    width: 100%;\n    box-sizing: border-box;\n    background: transparent; }\n  .context-menu .item {\n    padding: 4px;\n    border-bottom: 1px solid rgba(69, 103, 255, 0.8);\n    color: #fff;\n    background-color: rgba(110, 136, 255, 0.8);\n    cursor: pointer;\n    width: 100px;\n    position: relative; }\n    .context-menu .item:first-child {\n      border-top-left-radius: 5px;\n      border-top-right-radius: 5px; }\n    .context-menu .item:last-child {\n      border-bottom-left-radius: 5px;\n      border-bottom-right-radius: 5px; }\n    .context-menu .item:hover {\n      background-color: rgba(130, 153, 255, 0.8); }\n");var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(){function r(){e(this,r),this.visible=!1,this.x=0,this.y=0,this.default={searchBar:!1,onClick:function(){throw new TypeError("onClick should be overrided")}},this.bindTemplate()}return n(r,[{key:"bindTemplate",value:function(){this.el=document.createElement("div"),this.el.setAttribute("tabindex",1),this.el.innerHTML=function(t){var e="";try{var n={};e+='<div class="context-menu" :style.left="contextMenu.x+&quot;px&quot;" :style.top="contextMenu.y+&quot;px&quot;" @mouseleave="contextMenu.hide()" al-if="contextMenu.visible">',e+='<div class="search item" al-if="contextMenu.searchBar">',e+='<input al-value="filter"></div>',e+='<div class="item" al-repeat="item in contextMenu.searchItems(filter)" al-item>',e+="{{item}}</div></div>"}catch(t){pug.rethrow(t,void 0,void 0,n[void 0])}return e}();var e=t.makeInstance();e.directives.al.item=function(t,e,n,r){var o=this,i=r.changeDetector.locals,a=i.subitem||i.item;e.addEventListener("click",(function(t){o.onClick(a),t.stopPropagation()}))}.bind(this),this.$cd=e(this.el,{contextMenu:this})}},{key:"searchItems",value:function(t){var e=new RegExp(t,"i");return this.items.filter((function(t){return e.test(t)}))}},{key:"haveSubitems",value:function(t){return t.constructor===Object}},{key:"isVisible",value:function(){return this.visible}},{key:"show",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;this.disabled||(this.visible=!0,this.items=n||this.default.items,this.searchBar=r||this.default.searchBar,this.onClick=o||this.default.onClick,this.x=t,this.y=e,this.$cd.scan())}},{key:"hide",value:function(){this.visible=!1,this.$cd.scan()}}]),r}(),o=function(){function t(n){e(this,t),this.editor=n,this.items={Remove:"Remove"}}return n(t,[{key:"onClick",value:function(t,e){"Remove"===e&&this.editor.removeNode(t)}}]),t}(),i=function(){function t(n){e(this,t),this.editor=n,this.items={}}var r,o;return n(t,[{key:"onClick",value:(r=regeneratorRuntime.mark((function t(e,n){var r,o=e.x,i=e.y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createNode();case 2:(r=t.sent).position[0]=o,r.position[1]=i,this.editor.addNode(r);case 6:case"end":return t.stop()}}),t,this)})),o=function(){var t=r.apply(this,arguments);return new Promise((function(e,n){return function r(o,i){try{var a=t[o](i),c=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(c).then((function(t){r("next",t)}),(function(t){r("throw",t)}));e(c)}("next")}))},function(t,e){return o.apply(this,arguments)})}]),t}();return{install:function(t,e){var n=e.searchBar,a=void 0===n||n,c=new o(t),u=new i(t),s=new r,l={x:0,y:0};document.body.appendChild(s.el),t.on("componentregister",(function(t){u.items[t.name]=t})),t.on("mousemove",(function(t){var e=t.x,n=t.y;l.x=e,l.y=n})),t.on("contextmenu",(function(t){var e=t.e,n=t.node;t.view,e.preventDefault(),e.stopPropagation();var r=[e.clientX,e.clientY],o=r[0],i=r[1];n?s.show(o,i,Object.keys(c.items),!1,(function(t){return s.hide(),c.onClick(n,t)})):s.show(o,i,Object.keys(u.items),a,(function(t){return s.hide(),u.onClick(l,u.items[t])}))})),t.on("click",(function(t){var e=t.e;t.container,e.clientX,e.clientY,s.hide()}))}}}(o("8IF5N"));var s;s=JSON.parse('{"id":"tasksample@0.1.0","nodes":{"31":{"id":31,"data":{"msg":"Project B"},"inputs":{"act":{"connections":[{"node":38,"output":"act","data":{}}]}},"outputs":{"act":{"connections":[{"node":33,"input":"act","data":{}}]}},"position":[914.4483918586352,527.2492087621536],"name":"Task"},"33":{"id":33,"data":{"msg":"Goal B"},"inputs":{"act":{"connections":[{"node":31,"output":"act","data":{}},{"node":34,"output":"act","data":{}}]}},"outputs":{"act":{"connections":[]}},"position":[1333.014903813058,415.0260305681669],"name":"Task"},"34":{"id":34,"data":{"msg":"Project A"},"inputs":{"act":{"connections":[{"node":36,"output":"act","data":{}},{"node":37,"output":"act","data":{}}]}},"outputs":{"act":{"connections":[{"node":33,"input":"act","data":{}},{"node":35,"input":"act","data":{}}]}},"position":[912,147],"name":"Task"},"35":{"id":35,"data":{"msg":"Goal A"},"inputs":{"act":{"connections":[{"node":34,"output":"act","data":{}}]}},"outputs":{"act":{"connections":[]}},"position":[1339,123],"name":"Task"},"36":{"id":36,"data":{"msg":"Action A"},"inputs":{"act":{"connections":[]}},"outputs":{"act":{"connections":[{"node":34,"input":"act","data":{}}]}},"position":[403,58],"name":"Task"},"37":{"id":37,"data":{"msg":"Action B"},"inputs":{"act":{"connections":[]}},"outputs":{"act":{"connections":[{"node":34,"input":"act","data":{}}]}},"position":[406,328],"name":"Task"},"38":{"id":38,"data":{"msg":"Action C"},"inputs":{"act":{"connections":[]}},"outputs":{"act":{"connections":[{"node":31,"input":"act","data":{}}]}},"position":[452,629],"name":"Task"}}}');class l extends t(i).Control{constructor(t,e){super(),this.emitter=t,this.template='<input :value="msg" @input="change($event)"/>',this.scope={msg:e,change:this.change.bind(this)}}change(t){this.scope.value=t.target.value,this.update()}update(){this.putData("msg",this.scope.value),this.emitter.trigger("process"),this._alight.scan()}mounted(){this.scope.value=this.getData("msg")||0,this.update()}setValue(t){this.scope.value=t,this._alight.scan()}}const f=new(t(i).Socket)("Action");new(t(i).Socket)("Data");class h extends t(i).Component{constructor(){super("Task"),this.task={outputs:{}}}builder(e){var n=new l(this.editor,e.data.msg);e.addControl(n),e.addInput(new(t(i).Input)("act","Depends on",f,!0)),e.addOutput(new(t(i).Output)("act","Motivated by",f,!0))}worker(t,e){}}class p extends t(i).Component{constructor(){super("Progress"),this.task={outputs:{}}}builder(e){var n=new l(this.editor,e.data.msg);e.addControl(n),e.addInput(new(t(i).Input)("act","Depends on",f,!0)),e.addOutput(new(t(i).Output)("act","Motivated by",f,!0))}worker(t,e){}}var d=[new h,new p],v=document.querySelector("#rete"),m=new(t(i).NodeEditor)("ariadne@0.2.0",v);m.use(a),m.use(c),m.use(u);var g=new(t(i).Engine)("ariadne@0.2.0");async function y(){await g.abort(),await g.process(m.toJSON())}d.map((t=>{m.register(t),g.register(t)})),m.on("process connectioncreate connectionremove nodecreate noderemove",(()=>{if(y(),!m.silent){var t=m.toJSON();localStorage.setItem("ariadne",JSON.stringify(t))}})),document.getElementById("save-btn").onclick=()=>{localStorage.setItem("ariadne",JSON.stringify(m.toJSON()))},document.getElementById("import-btn").onchange=t=>{var e=t.target.files[0];if(e){var n=new FileReader;n.onload=function(t){var e=t.target.result;m.fromJSON(JSON.parse(e)).then((()=>{m.view.resize(),y()}))},n.readAsText(e)}},document.getElementById("export-btn").onclick=()=>{var t=new Blob([JSON.stringify(m.toJSON())],{type:"application/json"}),e=document.createElement("a"),n=URL.createObjectURL(t);e.href=n,e.download="data.json",document.body.appendChild(e),e.click(),setTimeout((function(){document.body.removeChild(e),window.URL.revokeObjectURL(n)}),0)};var w=JSON.parse(localStorage.getItem("ariadne"));w||(w=t(s)),m.fromJSON(w).then((()=>{m.view.resize(),y()}));
//# sourceMappingURL=index.fb576578.js.map
